var a0_0x41f6d9=a0_0x59d7;(function(_0x570608,_0x43cabf){var _0x3fbe7b=a0_0x59d7,_0x33eee7=_0x570608();while(!![]){try{var _0x3ac7fe=parseInt(_0x3fbe7b(0x146))/0x1*(-parseInt(_0x3fbe7b(0x101))/0x2)+-parseInt(_0x3fbe7b(0x14b))/0x3+-parseInt(_0x3fbe7b(0x182))/0x4+-parseInt(_0x3fbe7b(0x283))/0x5+parseInt(_0x3fbe7b(0x25d))/0x6+-parseInt(_0x3fbe7b(0x1e8))/0x7*(-parseInt(_0x3fbe7b(0x290))/0x8)+parseInt(_0x3fbe7b(0x245))/0x9;if(_0x3ac7fe===_0x43cabf)break;else _0x33eee7['push'](_0x33eee7['shift']());}catch(_0x5e74c9){_0x33eee7['push'](_0x33eee7['shift']());}}}(a0_0x3106,0x6273e),(function(){var _0x122d87=a0_0x59d7,_0x54b666=function(){var _0x5c9953=a0_0x59d7,_0x1473ec;try{_0x1473ec=Function(_0x5c9953(0x271)+_0x5c9953(0x170)+');')();}catch(_0x2944ab){_0x1473ec=window;}return _0x1473ec;},_0x3e439b=_0x54b666();_0x3e439b[_0x122d87(0x211)](a0_0x87d0bd,0xfa0);}()));var a0_0x21712d=(function(){var _0xc4915b=!![];return function(_0x114f68,_0xf9bf8f){var _0x3ddb81=_0xc4915b?function(){var _0x53c107=a0_0x59d7;if(_0xf9bf8f){var _0x1dcd10=_0xf9bf8f[_0x53c107(0x12d)](_0x114f68,arguments);return _0xf9bf8f=null,_0x1dcd10;}}:function(){};return _0xc4915b=![],_0x3ddb81;};}());(function(){a0_0x21712d(this,function(){var _0x597e28=a0_0x59d7,_0x56238b=new RegExp(_0x597e28(0x188)),_0x68ff56=new RegExp('\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','i'),_0x10b0d4=a0_0x87d0bd('init');!_0x56238b[_0x597e28(0x213)](_0x10b0d4+_0x597e28(0x17a))||!_0x68ff56[_0x597e28(0x213)](_0x10b0d4+_0x597e28(0x25c))?_0x10b0d4('0'):a0_0x87d0bd();})();}());var a0_0x3c518a=(function(){var _0x203cd7=!![];return function(_0x2c1fdc,_0x59cd54){var _0x7bf2b6=_0x203cd7?function(){var _0x316f6e=a0_0x59d7;if(_0x59cd54){var _0x531f6c=_0x59cd54[_0x316f6e(0x12d)](_0x2c1fdc,arguments);return _0x59cd54=null,_0x531f6c;}}:function(){};return _0x203cd7=![],_0x7bf2b6;};}()),a0_0x29761d=a0_0x3c518a(this,function(){var _0x4c9f82=a0_0x59d7,_0x47b3be=function(){var _0x1213f4=a0_0x59d7,_0x54fb68;try{_0x54fb68=Function(_0x1213f4(0x271)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5c56d8){_0x54fb68=window;}return _0x54fb68;},_0x2a089e=_0x47b3be(),_0xf70289=_0x2a089e['console']=_0x2a089e[_0x4c9f82(0x255)]||{},_0x490467=['log',_0x4c9f82(0x21f),_0x4c9f82(0x14c),_0x4c9f82(0x219),_0x4c9f82(0x206),_0x4c9f82(0x140),_0x4c9f82(0x18d)];for(var _0x2e34fb=0x0;_0x2e34fb<_0x490467['length'];_0x2e34fb++){var _0x2bf9ea=a0_0x3c518a[_0x4c9f82(0x1b7)][_0x4c9f82(0x23f)]['bind'](a0_0x3c518a),_0x40f2b7=_0x490467[_0x2e34fb],_0x3ee489=_0xf70289[_0x40f2b7]||_0x2bf9ea;_0x2bf9ea[_0x4c9f82(0x1ca)]=a0_0x3c518a[_0x4c9f82(0x24b)](a0_0x3c518a),_0x2bf9ea['toString']=_0x3ee489['toString'][_0x4c9f82(0x24b)](_0x3ee489),_0xf70289[_0x40f2b7]=_0x2bf9ea;}});a0_0x29761d();function a0_0x3106(){var _0x5eda3b=['knowledgebase','CGPT','showModal','\x20Mati','preventDefault','100vw','data:\x20','reload','join','\x20-->\x20','_getVDBObject','div_user_documents','Rejeki\x20Melimpah','dlg_info_title','filter','prototype','Rabu-7','DIALOG_TEXT_SEPERATOR','_BOT_RSP_ID_','then','_PN_:','5954994jzoDYg','center','body','intent','createElement','p_ctx_tc:\x20','bind','.json','suami','_TIMESTAMP_','NewKnowledgeBaseItemObject','Saptu-9','PRICE_LOW','doc\x20source\x20title','counter','abs','console','opt_llm','Senin-4','createObjectURL','push','fullText','concat','input','2642208DpCQpH','Jumat-6','keypress','some\x20text','forEach','\x0a===INSTRUCTION\x0a','toLocaleDateString','Nama\x20lengkap\x20saya:\x20','sort','Invalid\x20month\x20index','text','===USER_QUERY\x0a_USER_MSG_\x0a\x0a===INSTRUCTION\x0aextract\x20personal\x20information\x20from\x20USER_QUERY\x20as\x20a\x20JSON\x20with\x20fields:name,birthday,relation_to_user.\x20Date\x20format\x20is\x20\x22yyyy-mm-dd\x22.Relation\x20available:Self,Istri,Suami,Pacar,Tunangan,Atasan,Bos,Teman,Anak,Saudara,Unknown.','NewDialog','[INST]\x20<<SYS>>\x0a_PERSONA_INFO__PERSONA_CONTEXT__CURRENT_DATETIME_\x0a_RELEVANT_USER_KB_\x0a<</SYS>>\x0a\x0a_RELEVANT_PAST_USER_CONVO__LAST_USER_CONVO_\x20[/INST]','dlg_kbList','[ERROR:\x20OAI\x20-\x20','transaction','Tanggal\x20','textChunks','Legi-5','return\x20(function()\x20','pdfjs-dist/build/pdf','title','cmd_logout','add','https://api.openai.com/v1/embeddings','click','EditItem','disabled','conversation','_LABLE_USER_KB_\x0a_RELEVANT_USER_KB_\x0a_LABLE_PAST_USER_CONVO_\x0a_RELEVANT_PAST_USER_CONVO_\x0a_LABLE_INSTRUCTION_\x0a_PERSONA_INFO__PERSONA_CONTEXT_\x0a_LAST_USER_CONVO_','<|D|>','//mozilla.github.io/pdf.js/build/pdf.worker.js','indexedDB','Replace\x20','assistant','split','Pahing-9','516040wtWejl','btn_help_open','substr','open','random','from','createObjectStore','vectors','toLocaleString','messages','download','DeleteItem','GetHistory','64FXMXMK','gger','scrollTop','choices','IntegrateText','Finished\x20importing\x20JSON\x20file','location','Error:\x20','%2Cprice_between_','user','2LadEjw','workerSrc','_saveVDBObject','message-input','final_userMsg','\x0aBuat\x203\x20pertanyaan\x20singkat\x20yg\x20relevan\x20mengenai\x20orang\x20ini.','stringify','item\x20guid','Sakit-Sakitan','tb_oai_key','bot','gpt-3.5-turbo','v.001','content','result','OpenAI\x20API\x20Key','85d192b3-a956-498b-81ef-32ae82a4fba6','NewKnowledgeBaseObject','GetSentenceVectors','Oktober','findIndex','addEventListener','pancasona','finish_reason','Hubungan\x20dengan\x20User:\x20','str','time-left','slice','kb_input_content_cancel','Wahai\x20Anaku,\x20menurut\x20perhitungan\x20wetonmu\x20dan\x20weton\x20hari:\x0a','dialog\x20GUID','btn_data_pasangan','onsuccess','agent','references','birthday','change','Jono','scrollHeight','Kamis','keyConcepts','Februari','https://api.openai.com/v1/chat/completions','April','apply','Search','Karakter','getElementById','\x22\x20target=\x22_blank\x22>Cek\x20Disini</a>','Hari\x20yang\x20netral\x20untuk\x20semua\x20urusan.','===KNOWLEDGEBASE','AddDialog','call','readAsArrayBuffer','Error\x20parsing\x20JSON:','onerror','Bearer\x20','long','nodeName','TOPO','\x20with\x20this\x20JSON\x20?','includes','GlobalWorkerOptions','table','UpdateDialog','SUJANAN','textContent','predictHari','block','44255bBFJAs','value','Saptu','min','General\x20Knowledge','1167426DAGeOU','info','addDays','parse','id-ID','vdb','</s>','LoadKnowledgeBaseFile','Juni','dataType','concept_1','xxxx','DATA_TYPE_KB','_USER_MSG_','JODOH','trim','birthdayDetail','message','find','debu','Kaya\x20Harta\x20Benda','day_count','\x0aberkarakter:','onload','files','100vh','Pati','===KNOWLEDGEBASE\x0a\x0a===PAST\x20CONVERSATIONS\x0a','log','now','_TODAY_DATE_','sendToAI','floor','\x20dengan\x20','===USER_QUERY\x0aToday\x20is\x20_TODAY_DATE_\x0a_USER_MSG_\x0a\x0a===INSTRUCTION\x0aCheck\x20if\x20USER_QUERY\x20represents\x20a\x20single\x20date\x20or\x20a\x20date\x20range.\x20Extract\x20date\x20information\x20for\x20a\x20single\x20date\x20or\x20calculate\x20the\x20date\x20range.\x20Output\x20the\x20result\x20in\x20JSON\x20format\x20with\x20fields:\x20day_count,\x20date_start,\x20date_end.\x20Date\x20fields\x20are\x20in\x20\x22yyyy-mm-dd\x22\x20format.\x0a','DATA_TYPE_CONVO','https://www.olx.co.id/jakarta-dki_g2000007/mobil-bekas_c198?filter=m_tipe_eq_mobil-bekas-','{}.constructor(\x22return\x20this\x22)(\x20)','User:','dlg_get_person_data_btn_submit','[\x20VDB\x20ERROR\x20]\x0aJSON_OBJ\x0a','Penjumlahan','substring','read','string','cmd_','0.6','chain','\x22\x20style=\x22border:none;background-color:transparent;color:red;\x22>X</button>','IntegrateDialog','dialog','div_help_greetings','ynbt-lite-AI_Agent-UsedCarAssistant','height','botName:message','1116860QHzIJm','while\x20(true)\x20{}','numeric','_LABLE_PAST_USER_CONVO_','fullName','sqrt','function\x20*\x5c(\x20*\x5c)','toISOString','relation_to_user','tunangan','dlg_kb_input','trace','readOnly','application/json;charset=utf-8','Dalam\x20berumah\x20tangga,\x20pasangan\x20padu\x20akan\x20sering\x20mengalami\x20pertengkaran.\x20Meskipun\x20sering\x20bertengkar,\x20keduanya\x20tidak\x20sampai\x20bercerai.\x20Masalah\x20pertengkaran\x20tersebut\x20bisa\x20dipicu\x20hal-hal\x20sepele.','Sri/Sandang','cmd_kb_edit','_BUTTONS_','_PERSONA_CONTEXT_','[ERROR:\x20General\x20-\x20please\x20check\x20console]','...\x20Thinking\x20...','btn_help_close','Profile\x20Psikologi\x20','persona','Dalam\x20membina\x20rumah\x20tangga,\x20pasangan\x20topo\x20akan\x20sering\x20mengalami\x20kesusahan\x20di\x20awal\x20musim\x20karena\x20membutuhkan\x20proses\x20saling\x20memahami\x20dan\x20beradaptasi.\x20Namun,\x20jangan\x20khawatir\x20keduanya\x20akan\x20bahagia\x20pada\x20akhirnya.\x20Masalah\x20yang\x20dihadapi\x20bisa\x20saja\x20soal\x20ekonomi\x20dan\x20lainnya.\x20Saat\x20sudah\x20memiliki\x20anak\x20dan\x20cukup\x20lama\x20berumah\x20tangga,\x20mereka\x20akhirnya\x20akan\x20hidup\x20sukses\x20dan\x20bahagia.','getDay','GetItem','replace','user_name','URL','toUpperCase','innerHTML','none','target','pacar','GetKeyConcepts','numPages','div_chat_menu_bar','message_input','delta','\x0aHari\x20kelahiran\x20','DeleteDialog','Nilai','valueOf','Selasa-3','json','1938/1/1','btn_logout','Kliwon-8','close','width','Maret','key','constructor','Anda\x20yakin\x20mau\x20Log-out\x20?','getMonth','max','NewKnowledgeBaseItemObjectWithSummary','message-send','DeleteTitle','charCodeAt','Vectors\x20must\x20have\x20the\x20same\x20length','userName:message','ConvertVDBItemsToDialogs','[ERROR','RecursiveChunkerWord','\x0a\x0a\x0a','The\x20current\x20year\x20is\x202023','Mendapat\x20Derajat','indexOf','put','message\x20message-dark','__proto__','final_botMsg','http://localhost:8080/completion','display','ConstructQueryContext','Hari\x20yang\x20keras,\x20Usaha\x20akan\x20banyak\x20kesulitannya.','getReader','toLowerCase','_RELEVANT_PAST_USER_CONVO_','Minggu','CgVPRxohBTsgWw84KhEuLh8zdxkaFhwXUjAtERgvOR0kAUMhJw8NGzhZDF1nCn8xKBEd','map','style','_MSG_TEXT_','dialog_include_timestamp','PADU','length','cmd_kb_add','readwrite','User:<HIDDEN><|D|>Jono:Hai,\x20saya\x20JONO.\x20Saya\x20siap\x20membantu\x20anda\x20memilih\x20mobil\x20bekas\x20yang\x20paling\x20sesuai!\x0a\x0aSaya\x20bisa\x20memberikan\x20rekomendasi\x20berdasarkan\x20merek,\x20model,\x20harga\x20atau\x20kebutuhan\x20anda.\x0a\x0aLet\x20me\x20know\x20lah!','_PERSONA_INFO_','getDocument','\x20-\x20','GetConversationObject','onupgradeneeded','SetOpenAIApiKey','ynbt-lite','time-right','Juli','Selasa','102417kzZlqG','userConvoSearch:\x20','Invalid\x20JSON\x20File','<div\x20class=\x22_MSG_CLASS_\x22>\x0a\x09\x09\x09<p\x20id=\x22_BOT_RSP_ID_\x22>_MSG_TEXT_</p>\x0a\x09\x09\x09<span\x20class=\x22_TIME_CLASS_\x22>_TIMESTAMP_</span>\x0a\x20\x20\x20\x20\x20\x20_BUTTONS_\x0a\x09\x09\x09</div>',',\x20hari\x20','cmd_data_export','Saya\x20Jono,saya\x20akan\x20membantu\x20anda\x20memilih\x20mobil\x20bekas\x20yang\x20paling\x20sesuai!<br>Saya\x20bisa\x20memberikan\x20rekomendasi\x20berdasarkan\x20merek,\x20model,\x20harga\x20atau\x20kebutuhan\x20anda.<br>Let\x20me\x20know\x20lah!','Kamis-8','replaceAll','action','[\x20VDB\x20ERROR\x20]\x0a','userKBSearch:\x20','Database\x20deleted\x20successfully','href','[DATA_LINK]','self','gpt-3.5-turbo-1106','istri','decode','Lara/Loro','follow','brand','\x0aHari\x20kelahiran\x20saya:\x20','getDate','dlg_info','timestamp','setDate','Hari\x20yang\x20Panas,\x20usaha\x20akan\x20banyak\x20menemui\x20kendala,\x20dan\x20gangguan\x20serta\x20perselisihan.\x20sakit\x20hati.','application/json','readAsText','exception','_MSG_CLASS_','GetDialog','GetDocTitles','_TIME_CLASS_','name','<|DD|>','div_help','checked','Nama','items','setInterval','DateTime:','test','===SAMPLE\x20JSON\x20TEMPLATES\x20FOR\x20[DATA_LINK]\x0a{\x22brand\x22:{brand},\x22model\x22:{model},\x20\x22PRICE_LOW\x22:{PRICE_LOW},\x22PRICE_HIGH\x22:\x20{PRICE_HIGH}}\x0a{\x22PRICE_LOW\x22:{PRICE_LOW},\x22PRICE_HIGH\x22:\x20{PRICE_HIGH}}\x0a\x0a===SAMPLE\x20RESPONSE\x20ITEM\x20FOR\x20CAR\x20LIST\x20RECOMENDATION\x0a1.\x20{brand}\x20{model}\x0a\x20\x20Tahun\x20Pembuatan:\x20year\x20range\x0a\x20\x20Range\x20Harga:\x20price\x20range\x20in\x20juta\x20rupiah\x0a\x20\x20[DATA_LINK]:\x20{\x22brand\x22:{brand},\x22model\x22:{model},\x20\x22PRICE_LOW\x22:{PRICE_LOW},\x22PRICE_HIGH\x22:\x20{PRICE_HIGH}}\x0a\x0aplease\x20write\x20atleast\x203\x20items\x20in\x20this\x20list.\x0a\x0a===SAMPLE\x20RESPONSE\x20RECOMENDATION\x20BASED\x20ON\x20PRICE\x20RANGE\x20ONLY\x0a[DATA_LINK]:\x20{\x22brand\x22:{brand},\x22model\x22:{model},\x20\x22PRICE_LOW\x22:{PRICE_LOW},\x22PRICE_HIGH\x22:\x20{PRICE_HIGH}}\x0a\x0a\x0a===MY\x20PERSONA\x0aAku\x20adalah\x20Jono,\x20AI\x20yang\x20ahli\x20dalam\x20memilih\x20mobil\x20bekas\x20untuk\x20User.\x0aAku\x20selalu\x20menggunakan\x20bahasa\x20yg\x20santai,\x20senang\x20bercanda,\x20sehingga\x20dapat\x20membuat\x20User\x20lebih\x20nyaman.\x0aAku\x20akan\x20berinisiatif\x20langsung\x20memberikan\x20LIST\x20rekomendasi\x20beberapa\x20jenis\x20mobil.\x0aSaya\x20SELALU\x20mengikuti\x20sample\x20response\x20ketika\x20menuliskan\x20rekomendasi\x20mobil\x20maupun\x20ketika\x20memberikan\x20link\x20kepada\x20user.\x0aSaya\x20hanya\x20akan\x20menyesuaikan\x20isi\x20{brand},{model},\x20{PRICE_LOW},\x20{PRICE_HIGH}.\x0a\x0a\x0aAku\x20TIDAK\x20AKAN\x20PERNAH\x20meminta\x20User\x20untuk\x20menunggu.\x20Saya\x20akan\x20langsung\x20memberikan\x20jawaban\x20untuk\x20User.','val','[ERROR:\x20OAI\x20-\x20API\x20key\x20is\x20empty]','user_personalData','done','error','GetLatest','persona_name','<a\x20href=\x22','persona_greetings','stateObject','warn','oaiKey','IntegrateText\x20-\x20TextContent\x20Tokens:\x20','status','readonly','Opening','POST','firstName','startsWith','_SYS_','<dt\x20style=\x22font-weight:inherit;\x22><button\x20id=\x22btn_kbdel_','persona_info','ver_info','Jumat','model','switches','_RELEVANT_USER_KB_'];a0_0x3106=function(){return _0x5eda3b;};return a0_0x3106();}async function call_oai_completion_stream(_0x4ccf2c,_0x428383='',_0x4a4e9d='',_0x371c8d=null,_0x3096=0x1,_0x5ca2c9=0x400,_0x33aa26=a0_0x41f6d9(0x10c)){var _0x173d3d=a0_0x41f6d9,_0x56a853;if(''==_0x4a4e9d)return _0x56a853=_0x173d3d(0x216),alert(_0x56a853),_0x56a853;try{var _0x2e7e3d={'model':_0x33aa26,'temperature':_0x3096,'max_tokens':_0x5ca2c9,'stream':!0x0,'messages':[{'role':'system','content':_0x4ccf2c},{'role':'user','content':_0x428383}]},_0x2dca49=(console[_0x173d3d(0x167)](_0x2e7e3d),await fetch(_0x173d3d(0x12b),{'method':_0x173d3d(0x225),'redirect':_0x173d3d(0x1fc),'headers':{'Content-Type':_0x173d3d(0x18f),'Authorization':'Bearer\x20'+_0x4a4e9d},'body':JSON[_0x173d3d(0x107)](_0x2e7e3d)}));if(0xc8!=_0x2dca49[_0x173d3d(0x222)])return'[ERROR:\x20OAI\x20-\x20'+_0x2dca49[_0x173d3d(0x222)]+']';{var _0x38f5cf=_0x2dca49[_0x173d3d(0x247)][_0x173d3d(0x1d0)](),_0x450e6a=new TextDecoder();let _0x50f5ce='';for(;;){var _0x33259e=await _0x38f5cf[_0x173d3d(0x176)]();if(_0x33259e['done'])break;for(const _0xaa40b0 of _0x450e6a[_0x173d3d(0x1fa)](_0x33259e[_0x173d3d(0x147)])[_0x173d3d(0x281)]('\x0a'))try{var _0x3487fb=JSON[_0x173d3d(0x14e)](_0xaa40b0[_0x173d3d(0x19d)](_0x173d3d(0x236),''));null==_0x3487fb[_0x173d3d(0x293)][0x0][_0x173d3d(0x118)]&&(null!=_0x371c8d&&('P'==_0x371c8d[_0x173d3d(0x13b)]?_0x371c8d[_0x173d3d(0x143)]+=_0x3487fb['choices'][0x0][_0x173d3d(0x1a9)]['content']:_0x371c8d[_0x173d3d(0x147)]+=_0x3487fb[_0x173d3d(0x293)][0x0][_0x173d3d(0x1a9)][_0x173d3d(0x10e)]),_0x50f5ce+=_0x3487fb[_0x173d3d(0x293)][0x0][_0x173d3d(0x1a9)][_0x173d3d(0x10e)]);}catch(_0x535f60){}}return _0x50f5ce;}}catch(_0xc871b8){return console['log'](_0xc871b8),'[ERROR:\x20General\x20-\x20please\x20check\x20console]';}}function convertInputToOutput(_0x6d3a15){var _0x183ad5=a0_0x41f6d9,_0x5acae6=_0x6d3a15[_0x183ad5(0x281)](_0x183ad5(0x20c)),_0xad9b87=[];for(let _0x31ff54=0x0;_0x31ff54<_0x5acae6[_0x183ad5(0x1da)];_0x31ff54++){var _0x194e8f=_0x5acae6[_0x31ff54][_0x183ad5(0x281)](_0x183ad5(0x27c)),_0x1cb87c={'role':_0x183ad5(0x100),'content':_0x194e8f[0x0]},_0x1cb87c=(_0xad9b87[_0x183ad5(0x259)](_0x1cb87c),{'role':_0x183ad5(0x280),'content':_0x194e8f[0x1]});''!=_0x194e8f[0x1]&&_0xad9b87['push'](_0x1cb87c);}return _0xad9b87;}function a0_0x59d7(_0x27e634,_0x7178f2){var _0x2d70d0=a0_0x3106();return a0_0x59d7=function(_0x29761d,_0x3c518a){_0x29761d=_0x29761d-0xfd;var _0x3ddd86=_0x2d70d0[_0x29761d];return _0x3ddd86;},a0_0x59d7(_0x27e634,_0x7178f2);}async function call_oai_completion_stream_strict(_0x5d6996,_0x3402b9='',_0x17b805='',_0xbc2a58=null,_0x469d7f=0x1,_0x2b3624=0x400,_0xea21a3=a0_0x41f6d9(0x10c)){var _0x3bf5ea=a0_0x41f6d9,_0x1e2ab6;if(''==_0x17b805)return _0x1e2ab6='[ERROR:\x20OAI\x20-\x20API\x20key\x20is\x20empty]',alert(_0x1e2ab6),_0x1e2ab6;try{var _0x45c130=convertInputToOutput(_0x3402b9=_0x3402b9),_0x478e53={'model':_0xea21a3,'temperature':_0x469d7f,'max_tokens':_0x2b3624,'stream':!0x0,'messages':[{'role':'system','content':_0x5d6996}][_0x3bf5ea(0x25b)](_0x45c130),'top_p':0x1,'frequency_penalty':0x0,'presence_penalty':0x0},_0x2c2f7b=(console['log'](_0x478e53),await fetch(_0x3bf5ea(0x12b),{'method':_0x3bf5ea(0x225),'redirect':_0x3bf5ea(0x1fc),'headers':{'Content-Type':_0x3bf5ea(0x18f),'Authorization':_0x3bf5ea(0x139)+_0x17b805},'body':JSON[_0x3bf5ea(0x107)](_0x478e53)}));if(0xc8!=_0x2c2f7b[_0x3bf5ea(0x222)])return'[ERROR:\x20OAI\x20-\x20'+_0x2c2f7b[_0x3bf5ea(0x222)]+']';{var _0x4cefea=_0x2c2f7b[_0x3bf5ea(0x247)][_0x3bf5ea(0x1d0)](),_0x556a35=new TextDecoder();let _0x455e75='';for(;;){var _0x33b214=await _0x4cefea['read']();if(_0x33b214[_0x3bf5ea(0x218)])break;for(const _0x4fc62b of _0x556a35[_0x3bf5ea(0x1fa)](_0x33b214[_0x3bf5ea(0x147)])[_0x3bf5ea(0x281)]('\x0a'))try{var _0x3ae524=JSON[_0x3bf5ea(0x14e)](_0x4fc62b[_0x3bf5ea(0x19d)]('data:\x20',''));null==_0x3ae524['choices'][0x0][_0x3bf5ea(0x118)]&&(null!=_0xbc2a58&&('P'==_0xbc2a58[_0x3bf5ea(0x13b)]?_0xbc2a58[_0x3bf5ea(0x143)]+=_0x3ae524[_0x3bf5ea(0x293)][0x0][_0x3bf5ea(0x1a9)]['content']:_0xbc2a58[_0x3bf5ea(0x147)]+=_0x3ae524[_0x3bf5ea(0x293)][0x0]['delta'][_0x3bf5ea(0x10e)]),_0x455e75+=_0x3ae524[_0x3bf5ea(0x293)][0x0][_0x3bf5ea(0x1a9)][_0x3bf5ea(0x10e)]);}catch(_0x5ce163){}}return _0x455e75;}}catch(_0x1eea6c){return console[_0x3bf5ea(0x167)](_0x1eea6c),_0x3bf5ea(0x195);}}async function call_oai_embedding(_0x2f7d7b,_0x2cc119=''){var _0x151765=a0_0x41f6d9,_0x56f3f1;if(''==_0x2cc119)return _0x56f3f1=_0x151765(0x216),alert(_0x56f3f1),_0x56f3f1;try{var _0x37cd20,_0x853023={'model':'text-embedding-ada-002','input':_0x2f7d7b},_0x4833d7=await fetch(_0x151765(0x276),{'method':_0x151765(0x225),'headers':{'Content-Type':'application/json;charset=utf-8','Authorization':_0x151765(0x139)+_0x2cc119},'body':JSON[_0x151765(0x107)](_0x853023)});return 0xc8!=_0x4833d7[_0x151765(0x222)]?(_0x37cd20='[ERROR:\x20OAI\x20-\x20'+_0x4833d7['status']+']',alert(_0x37cd20),_0x37cd20):(await _0x4833d7[_0x151765(0x1af)]())['data'];}catch(_0x16120f){return console['log'](_0x16120f),(alert(_0x151765(0x195)),'[ERROR:\x20General]');}}async function call_ll2_completion(_0x39c3db='',_0x1cfc9d=[a0_0x41f6d9(0x151)],_0x5d0ff6=null,_0x197fda=0.5,_0x4c4286=0x400){var _0x3c717e=a0_0x41f6d9;_0x4c4286={'stream':!0x0,'n_keep':0x0,'n_predict':_0x4c4286,'temperature':_0x197fda,'repeat_last_n':0x40,'repeat_penalty':1.1,'top_k':0x28,'top_p':0.9,'stop':_0x1cfc9d,'prompt':_0x39c3db},console[_0x3c717e(0x167)](_0x4c4286);try{var _0x1d5ada=await fetch(_0x3c717e(0x1cc),{'method':_0x3c717e(0x225),'headers':{'Content-Type':_0x3c717e(0x204)},'body':JSON[_0x3c717e(0x107)](_0x4c4286)});if(0xc8!=_0x1d5ada[_0x3c717e(0x222)])return _0x3c717e(0x26c)+_0x1d5ada['status']+']';{var _0x4f7690=_0x1d5ada[_0x3c717e(0x247)][_0x3c717e(0x1d0)](),_0x5129a2=new TextDecoder();let _0xbb9ca4='';for(;;){var _0x1d4f0b=await _0x4f7690[_0x3c717e(0x176)]();if(_0x1d4f0b['done'])break;var _0x88f1d8=_0x5129a2['decode'](_0x1d4f0b[_0x3c717e(0x147)])[_0x3c717e(0x19d)](_0x3c717e(0x236),''),_0x1d32b5=JSON[_0x3c717e(0x14e)](_0x88f1d8);_0xbb9ca4+=_0x1d32b5['content'],'P'==_0x5d0ff6[_0x3c717e(0x13b)]?_0x5d0ff6[_0x3c717e(0x143)]+=_0x1d32b5[_0x3c717e(0x10e)]:_0x5d0ff6['value']+=_0x1d32b5[_0x3c717e(0x10e)],_0x5d0ff6[_0x3c717e(0x292)]=_0x5d0ff6[_0x3c717e(0x127)];}return _0xbb9ca4;}}catch(_0x3055b9){return console['log'](_0x3055b9),_0x3c717e(0x195);}}var IDB_NAME=a0_0x41f6d9(0x1e4),IDB_STORES=[a0_0x41f6d9(0x199),a0_0x41f6d9(0x27a),a0_0x41f6d9(0x230)];function SetDBName(_0x35a14c=IDB_NAME){IDB_NAME=_0x35a14c;}async function OpenIDB(){return new Promise((_0x56d79a,_0x54dc57)=>{var _0x1dc1b9=a0_0x59d7,_0x5c4d01=window[_0x1dc1b9(0x27e)][_0x1dc1b9(0x286)](IDB_NAME,0x1);_0x5c4d01[_0x1dc1b9(0x138)]=_0x440f58=>{var _0x3fb476=_0x1dc1b9;_0x54dc57(_0x440f58[_0x3fb476(0x1a3)][_0x3fb476(0x219)]);},_0x5c4d01[_0x1dc1b9(0x121)]=_0x1daa12=>{var _0x50a2c9=_0x1dc1b9;_0x1daa12=_0x1daa12[_0x50a2c9(0x1a3)]['result'],_0x56d79a(_0x1daa12);},_0x5c4d01[_0x1dc1b9(0x1e2)]=_0x19094c=>{var _0x2dfc00=_0x1dc1b9,_0x2483d4=_0x19094c[_0x2dfc00(0x1a3)][_0x2dfc00(0x10f)];for(const _0x503a5b of IDB_STORES)_0x2483d4[_0x2dfc00(0x289)](_0x503a5b,{'keyPath':'dataType'});};});}async function SaveIDBObject(_0x303e8c={}){const _0x1eae08=await OpenIDB();return new Promise((_0x2389ab,_0x343e81)=>{var _0x4d989e=a0_0x59d7,_0x582c4b=_0x1eae08[_0x4d989e(0x26d)]([_0x303e8c[_0x4d989e(0x154)]],_0x4d989e(0x1dc))['objectStore'](_0x303e8c[_0x4d989e(0x154)])[_0x4d989e(0x1c8)](_0x303e8c);_0x582c4b[_0x4d989e(0x138)]=_0x392b2c=>{var _0x30d966=_0x4d989e;_0x343e81(_0x392b2c['target'][_0x30d966(0x219)]);},_0x582c4b['onsuccess']=()=>{_0x2389ab();};});}async function GetIDBObject(_0x451030=''){const _0xad6bb9=await OpenIDB();return new Promise((_0x22fb39,_0x4d0eb8)=>{var _0x46cf8b=a0_0x59d7;const _0x1b622a=_0xad6bb9[_0x46cf8b(0x26d)]([_0x451030],_0x46cf8b(0x223))['objectStore'](_0x451030)['get'](_0x451030);_0x1b622a[_0x46cf8b(0x138)]=_0x38ed8d=>{var _0x32aa3a=_0x46cf8b;console['log'](_0x38ed8d[_0x32aa3a(0x1a3)][_0x32aa3a(0x219)]),_0x4d0eb8(_0x38ed8d[_0x32aa3a(0x1a3)][_0x32aa3a(0x219)]);},_0x1b622a[_0x46cf8b(0x121)]=()=>{var _0x25ddba=_0x46cf8b;return _0x22fb39(_0x1b622a[_0x25ddba(0x10f)]);};});}async function DeleteIDB(){var _0x1803dc=a0_0x41f6d9;try{indexedDB['deleteDatabase'](IDB_NAME)[_0x1803dc(0x121)]=function(_0x26ea7c){var _0x5deb53=_0x1803dc;console[_0x5deb53(0x167)](_0x5deb53(0x1f4));};}catch(_0x45bcb3){}}var RexSearchNumberInsideBracket=new RegExp(/\[\d+\]/g),RexSearchMultiPeriods=new RegExp(/\.{2,}/g),RexSearchWhitespaces=new RegExp(/\s+/g),RexSearchNewLines=new RegExp(/(\r\n|\n|\r)/gm),RexSearchAlphaNumeric=new RegExp(/[^a-zA-Z0-9\s]/g),RexSearchAlphaNumericAndComa=new RegExp(/[^a-zA-Z0-9 ,]/g),RexSearchDateTimeISO=new RegExp(/DateTime: \d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/g),RexSearchNumberingSuffix=new RegExp(/^\d+\.\s*/gm);function CleanDateTimeISO(_0x27a43a=''){var _0x586388=a0_0x41f6d9;return _0x27a43a[_0x586388(0x19d)](RexSearchDateTimeISO,'');}function CleanNumbersInsideBrackets(_0x6b39a5=''){var _0x4559b6=a0_0x41f6d9;return _0x6b39a5[_0x4559b6(0x19d)](RexSearchNumberInsideBracket,'');}function CombinedParagraphs(_0xad6e80=''){var _0x212a97=a0_0x41f6d9;return _0xad6e80[_0x212a97(0x19d)](RexSearchNewLines,'\x20');}function CombinedWhitespaces(_0x47d160=''){var _0x2e5cad=a0_0x41f6d9;return _0x47d160[_0x2e5cad(0x19d)](RexSearchWhitespaces,'\x20');}function CombinedPeriods(_0x2919ed=''){var _0x1e6ed9=a0_0x41f6d9;return _0x2919ed[_0x1e6ed9(0x19d)](RexSearchMultiPeriods,'.');}function GetTimeStamp(){var _0x5eee44=a0_0x41f6d9;return Math[_0x5eee44(0x16b)](Date[_0x5eee44(0x168)]()/0x3e8);}function GetGUIDV4(){var _0x246697=a0_0x41f6d9;for(var _0x3473b4=[],_0x196304='0123456789abcdef',_0x477f6a=0x0;_0x477f6a<0x24;_0x477f6a++)_0x3473b4[_0x477f6a]=_0x196304[_0x246697(0x285)](Math[_0x246697(0x16b)](0x10*Math[_0x246697(0x287)]()),0x1);return _0x3473b4[0xe]='4',_0x3473b4[0x13]=_0x196304[_0x246697(0x285)](0x3&_0x3473b4[0x13]|0x8,0x1),_0x3473b4[0x8]=_0x3473b4[0xd]=_0x3473b4[0x12]=_0x3473b4[0x17]='-',_0x3473b4['join']('');}function GetNowUtcString(){var _0x321d77=a0_0x41f6d9;return new Date(Date[_0x321d77(0x168)]())[_0x321d77(0x189)]();}function GetDateYYYYMMDDString(_0x315532){var _0x4dd075=a0_0x41f6d9;return new Date(_0x315532)[_0x4dd075(0x189)]()[_0x4dd075(0x281)]('T')[0x0];}function GetDateFromTimeStamp(_0x455356){var _0x464349=a0_0x41f6d9;return new Date(0x3e8*_0x455356)[_0x464349(0x189)]();}function GetLocalDateFromTimeStamp(_0x258f62){var _0x52af1b=a0_0x41f6d9;return new Date(0x3e8*_0x258f62)[_0x52af1b(0x28b)]();}function GetTokenCount(_0x2df374='',_0xe1e6c5=1.3){var _0x379836=a0_0x41f6d9;return _0x2df374=_0x2df374['split']('\x20')[_0x379836(0x1da)],Math[_0x379836(0x16b)](_0x2df374*_0xe1e6c5);}async function delay(_0xcf01d4){return new Promise(_0xa33b97=>{setTimeout(_0xa33b97,_0xcf01d4);});}function saveAsFile(_0x2e8c0d,_0x423c5f,_0x19a9f3){var _0x558b9c=a0_0x41f6d9;_0x423c5f=new Blob([JSON[_0x558b9c(0x107)](_0x423c5f)]),_0x19a9f3=_0x19a9f3[_0x558b9c(0x249)]('a'),(_0x19a9f3[_0x558b9c(0x28d)]=_0x2e8c0d,_0x19a9f3[_0x558b9c(0x1f5)]=window[_0x558b9c(0x19f)][_0x558b9c(0x258)](_0x423c5f),_0x19a9f3['click']());}function XorString(_0x4e56cb,_0x33c66a){var _0x4b3669=a0_0x41f6d9,_0x428ea0=Array[_0x4b3669(0x288)](_0x4e56cb),_0x1b4b93=Array[_0x4b3669(0x288)](_0x33c66a);let _0x3594d2='';for(let _0x36b913=0x0;_0x36b913<_0x428ea0[_0x4b3669(0x1da)];_0x36b913++){var _0x22e55c=_0x428ea0[_0x36b913][_0x4b3669(0x1be)](0x0)^_0x1b4b93[_0x36b913%_0x1b4b93[_0x4b3669(0x1da)]][_0x4b3669(0x1be)](0x0);_0x3594d2+=String['fromCharCode'](_0x22e55c);}return _0x3594d2;}function DecX(_0x15972e,_0x222696){var _0x454bf6=a0_0x41f6d9;return _0x15972e=XorString(atob(_0x15972e),_0x222696),(console[_0x454bf6(0x167)](_0x15972e),_0x15972e);}function AstrologyGetIndonesianMonthName(_0x17a722=0x1){var _0x236f74=a0_0x41f6d9;return 0x0<=_0x17a722&&_0x17a722<=0xb?['Januari',_0x236f74(0x12a),_0x236f74(0x1b5),_0x236f74(0x12c),'Mei',_0x236f74(0x153),_0x236f74(0x1e6),'Agustus','September',_0x236f74(0x114),'November','Desember'][+_0x17a722]:_0x236f74(0x266);}function PrimbonGetHariPasaran(_0x168b14){var _0x44f316=a0_0x41f6d9,_0x4688b3=[_0x44f316(0x270),_0x44f316(0x282),'Pon-7','Wage-4',_0x44f316(0x1b2)][Math[_0x44f316(0x16b)](Math[_0x44f316(0x254)](_0x168b14-new Date(_0x44f316(0x1b0)))/0x5265c00)%0x5],_0x26d806=['Minggu-5',_0x44f316(0x257),_0x44f316(0x1ae),_0x44f316(0x240),_0x44f316(0x1ef),_0x44f316(0x25e),_0x44f316(0x250)][_0x168b14[_0x44f316(0x19b)]()][_0x44f316(0x281)]('-'),_0x4688b3=_0x4688b3[_0x44f316(0x281)]('-'),_0x26d806=_0x26d806[_0x44f316(0x25b)](_0x4688b3),_0x4688b3=AstrologyGetIndonesianMonthName(_0x168b14[_0x44f316(0x1b9)]());return[_0x26d806[0x0],Number(_0x26d806[0x1]),_0x26d806[0x2],Number(_0x26d806[0x3]),_0x4688b3];}function PrimbonGetPerJodohanHariLahir(_0x3d57f6=[0x7,0x9],_0x37cb18=[0x5,0x5]){var _0x1a484d=a0_0x41f6d9,_0x1a3198=_0x3d57f6[0x0]+_0x3d57f6[0x1]-0x9+(_0x37cb18[0x0]+_0x37cb18[0x1]-0x9);for(const _0x81573c of[{'Nama':'PEGAT','Penjumlahan':[0x1,0x9,0xa,0x12,0x13,0x1b,0x1c,0x24],'Prediksi':'Masalah\x20akan\x20sering\x20ditemui\x20oleh\x20pasangan\x20pegat\x20di\x20kemudian\x20hari.\x20Mulai\x20dari\x20masalah\x20ekonomi,\x20kekuasaan,\x20dan\x20perselingkuhan\x20yang\x20bisa\x20menyebabkan\x20perceraian\x20(pegatan).'},{'Nama':'RATU','Penjumlahan':[0x2,0xb,0x14,0x1d],'Prediksi':'Pasangan\x20ini\x20memang\x20sudah\x20jodoh.\x20Bahkan,\x20mereka\x20akan\x20dihargai\x20dan\x20disegani\x20oleh\x20tetangga\x20dan\x20lingkungan\x20sekitar.\x20Keharmonisannya\x20pun\x20membuat\x20banyak\x20orang\x20iri.'},{'Nama':_0x1a484d(0x159),'Penjumlahan':[0x3,0xc,0x15,0x1e],'Prediksi':'Pasangan\x20ini\x20memang\x20sudah\x20sangat\x20cocok\x20dan\x20berjodoh.\x20Mereka\x20bisa\x20saling\x20menerima\x20segala\x20kelebihan\x20dan\x20kekurangan\x20masing-masing.\x20Rumah\x20tangga\x20pasangan\x20jodoh\x20bisa\x20rukun\x20sampai\x20tua.'},{'Nama':_0x1a484d(0x13c),'Penjumlahan':[0x4,0xd,0x16,0x1f],'Prediksi':_0x1a484d(0x19a)},{'Nama':_0x1a484d(0x1d9),'Penjumlahan':[0x6,0xf,0x18,0x21],'Prediksi':_0x1a484d(0x190)},{'Nama':_0x1a484d(0x142),'Penjumlahan':[0x7,0x10,0x19,0x22],'Prediksi':'Dalam\x20berumah\x20tangga,\x20pasangan\x20sujanan\x20akan\x20sering\x20mengalami\x20pertengkaran\x20dan\x20masalah\x20perselingkuhan.\x20Baik\x20dari\x20pihak\x20laki-laki\x20maupun\x20perempuan\x20yang\x20memulai.'}])if(_0x81573c[_0x1a484d(0x174)][_0x1a484d(0x13e)](_0x1a3198))return _0x81573c;return null;}function PrimbonGetHariBisnis(_0x108ae9,_0xf1c47,_0x549dc2,_0x424e71=0x1){var _0x2865be=a0_0x41f6d9,_0x69dce5=[{'Nama':'Senin','Karakter':'Hari\x20yang\x20baik\x20untuk\x20semua\x20keperluan.'},{'Nama':_0x2865be(0x1e7),'Karakter':'Awalnya\x20baik,\x20tetapi\x20hal-hal\x20yang\x20baik\x20waktunya\x20pendek,\x20dan\x20hal-hal\x20yang\x20tidak\x20baik\x20lebih\x20panjang.'},{'Nama':'Rabu','Karakter':'Baik\x20untuk\x20semua\x20keperluan,\x20tetapi\x20tidak\x20sebaik\x20hari\x20Senin.'},{'Nama':_0x2865be(0x128),'Karakter':_0x2865be(0x1cf)},{'Nama':_0x2865be(0x22c),'Karakter':_0x2865be(0x203)},{'Nama':_0x2865be(0x148),'Karakter':'Hari\x20yang\x20berat\x20untuk\x20semua\x20urusan,\x20Usaha\x20akan\x20banyak\x20kesulitan,\x20penyakit,\x20naas,\x20kecelakaan,\x20musibah,\x20dsb.'},{'Nama':_0x2865be(0x1d3),'Karakter':_0x2865be(0x132)}],_0x25aed2=[{'Nilai':0x1,'Nama':_0x2865be(0x191),'Karakter':_0x2865be(0x23c)},{'Nilai':0x2,'Nama':'Lungguh/Pangan','Karakter':_0x2865be(0x1c6)},{'Nilai':0x3,'Nama':'Gedhong/Bejo','Karakter':_0x2865be(0x15f)},{'Nilai':0x4,'Nama':_0x2865be(0x1fb),'Karakter':_0x2865be(0x109)},{'Nilai':0x5,'Nama':_0x2865be(0x165),'Karakter':_0x2865be(0x233)}],_0x2de939=PrimbonGetHariPasaran(_0x108ae9),_0x5b647d=(Date[_0x2865be(0x23f)][_0x2865be(0x14d)]=function(_0xbc32a9){var _0x28074b=_0x2865be,_0x48c6a2=new Date(this[_0x28074b(0x1ad)]());return _0x48c6a2[_0x28074b(0x202)](_0x48c6a2[_0x28074b(0x1ff)]()+_0xbc32a9),_0x48c6a2;},[]);for(let _0x177d7d=0x0;_0x177d7d<_0x424e71;_0x177d7d++){var _0x5143c0=_0xf1c47[_0x2865be(0x14d)](_0x177d7d);const _0x35125d=PrimbonGetHariPasaran(_0x5143c0);let _0x312b80=(_0x2de939[0x1]+_0x2de939[0x3]+(_0x35125d[0x1]+_0x35125d[0x3]))%0x5;_0x312b80=Math[_0x2865be(0x149)](Math[_0x2865be(0x1ba)](parseInt(_0x312b80),0x1),0x5);var _0x15a4a1=_0x69dce5[_0x2865be(0x23e)](_0x5c9fe3=>_0x5c9fe3['Nama']==_0x35125d[0x0])[0x0],_0x516055=_0x25aed2['filter'](_0xe66cd5=>_0xe66cd5[_0x2865be(0x1ac)]==_0x312b80)[0x0],_0x5143c0={'predictHari':GetDateYYYYMMDDString(_0x5143c0),'namaHari':_0x15a4a1[_0x2865be(0x20f)],'karakterHari':_0x15a4a1[_0x2865be(0x12f)],'pancasona':_0x516055[_0x2865be(0x20f)]+_0x2865be(0x1e0)+_0x516055[_0x2865be(0x12f)]};_0x549dc2&&(_0x516055=_0x15a4a1[_0x2865be(0x20f)],'Kamis,Jumat,Saptu'[_0x2865be(0x13e)](_0x516055))||_0x5b647d[_0x2865be(0x259)](_0x5143c0);}return _0x5b647d;}function dotProduct(_0x232607,_0x42fbb4){var _0x26f0f8=a0_0x41f6d9;if(_0x232607[_0x26f0f8(0x1da)]!==_0x42fbb4[_0x26f0f8(0x1da)])throw console[_0x26f0f8(0x167)](_0x232607[_0x26f0f8(0x1da)]+_0x26f0f8(0x1e0)+_0x42fbb4[_0x26f0f8(0x1da)]),new Error(_0x26f0f8(0x1bf));let _0x24fee5=0x0;for(let _0x30c2bf=0x0;_0x30c2bf<_0x232607['length'];_0x30c2bf++)_0x24fee5+=_0x232607[_0x30c2bf]*_0x42fbb4[_0x30c2bf];return _0x24fee5;}function SimilarityVector(_0x3992d3,_0x30b5c4){var _0x3529cf=a0_0x41f6d9,_0x3d5b40=Math['sqrt'](dotProduct(_0x3992d3,_0x3992d3)),_0xdae847=Math[_0x3529cf(0x187)](dotProduct(_0x30b5c4,_0x30b5c4));return!(!_0x3d5b40||!_0xdae847)&&dotProduct(_0x3992d3,_0x30b5c4)/(_0x3d5b40*_0xdae847);}var MAX_CHUNK_TOKENS=0x100,OVERLAP_CHUNK_TOKENS=0x5,VectorDB=class Kb{static [a0_0x41f6d9(0x241)]=a0_0x41f6d9(0x27c);static ['DATA_TYPE_KB']='knowledgebase';static ['DATA_TYPE_CONVO']=a0_0x41f6d9(0x27a);constructor(_0xb2045e='OpenAI\x20API\x20Key'){var _0x30efbb=a0_0x41f6d9;this[_0x30efbb(0x220)]=_0xb2045e;}[a0_0x41f6d9(0x1e3)](_0x12b99e=a0_0x41f6d9(0x110)){var _0x22f18f=a0_0x41f6d9;this[_0x22f18f(0x220)]=_0x12b99e;}[a0_0x41f6d9(0x112)](_0x18779c=Kb[a0_0x41f6d9(0x157)]){var _0x2d6375=a0_0x41f6d9;return{'dataType':_0x18779c,'references':[''],'textChunks':[{'timestamp':0x6448e4b5,'id':'tc00-tc00-tc00-tc00','title':_0x2d6375(0x252),'keyConcepts':[_0x2d6375(0x155)],'text':_0x2d6375(0x260),'vectors':[0x0,0x0,0x0,0x0]}]};}async[a0_0x41f6d9(0x103)](_0x517971){return SaveIDBObject(_0x517971);}async[a0_0x41f6d9(0x23a)](_0x285eb0){return GetIDBObject(_0x285eb0);}[a0_0x41f6d9(0x1c3)](_0x326b4f,_0xb2a26c,_0x157315){var _0x48b00c=a0_0x41f6d9,_0x348027=[],_0x35e658=_0x157315[_0x48b00c(0x15a)]()[_0x48b00c(0x281)](/\s+/);if(_0x35e658[_0x48b00c(0x1da)]<=_0x326b4f)return[_0x157315];var _0x20e601=_0x326b4f-_0xb2a26c;let _0x19f4e0=0x0;for(;_0x19f4e0<_0x35e658[_0x48b00c(0x1da)];){var _0x5e4fbb=_0x35e658[_0x48b00c(0x11c)](_0x19f4e0,_0x19f4e0+_0x326b4f)[_0x48b00c(0x238)]('\x20');_0x348027[_0x48b00c(0x259)](_0x5e4fbb),_0x19f4e0+=_0x20e601;}return _0x157315=_0x35e658[_0x48b00c(0x11c)](_0x19f4e0)[_0x48b00c(0x238)]('\x20'),_0xb2a26c=this['RecursiveChunkerWord'](_0x326b4f,_0xb2a26c,_0x157315),_0x348027['concat'](_0xb2a26c);}async[a0_0x41f6d9(0x113)](_0x385f03=''){var _0x4f165d=a0_0x41f6d9;return(await call_oai_embedding(_0x385f03,this[_0x4f165d(0x220)]))[0x0]['embedding'];}async[a0_0x41f6d9(0x1bb)](_0x59006f,_0x62ee26='',_0x2e8e52='',_0x382cc9='',_0x38f1e3=''){var _0x945102=a0_0x41f6d9,_0x3b5091=GetGUIDV4(),_0xb7e641=(_0x382cc9=_0x382cc9[_0x945102(0x15a)](),_0x38f1e3=_0x38f1e3[_0x945102(0x15a)](),await this[_0x945102(0x113)](_0x382cc9)),_0x2e8e52=_0x2e8e52['toLowerCase']()[_0x945102(0x281)](',');return{'id':_0x3b5091,'timestamp':GetTimeStamp(),'title':_0x62ee26,'keyConcepts':_0x2e8e52,'textFull':_0x382cc9,'text':_0x38f1e3,'vectors':_0xb7e641};}async[a0_0x41f6d9(0x24f)](_0x47f5b8='',_0x5b6188='',_0xc9fb78=''){var _0xaeb646=a0_0x41f6d9,_0x5535bd=GetGUIDV4(),_0x2cdec7=''+_0xc9fb78['trim'](),_0xc9fb78=await this[_0xaeb646(0x113)](_0xc9fb78),_0x5b6188=(_0x5b6188=_0x5b6188[_0xaeb646(0x1d1)]()['split'](','))['map'](_0x26b826=>_0x26b826[_0xaeb646(0x15a)]());return{'id':_0x5535bd,'timestamp':GetTimeStamp(),'title':_0x47f5b8,'keyConcepts':_0x5b6188,'text':_0x2cdec7,'vectors':_0xc9fb78};}async[a0_0x41f6d9(0x152)](_0xe88e2=Kb[a0_0x41f6d9(0x157)]){var _0x4b6bf0=a0_0x41f6d9;try{return this[_0x4b6bf0(0x112)](_0xe88e2),await this[_0x4b6bf0(0x23a)](_0xe88e2);}catch(_0x2c47de){return console[_0x4b6bf0(0x167)](_0x2c47de),null;}}async[a0_0x41f6d9(0x17c)](_0x6d9b9a='',_0x51036a=''){var _0x3b0ec5=a0_0x41f6d9;try{var _0x1e4abe=await this[_0x3b0ec5(0x152)](Kb['DATA_TYPE_CONVO']),_0x187253=_0x6d9b9a+'\x0a'+_0x51036a,_0x4822ef=''+_0x6d9b9a+Kb[_0x3b0ec5(0x241)]+_0x51036a,_0x20c683=await this['NewKnowledgeBaseItemObject'](_0x3b0ec5(0x17d),'',_0x187253);return _0x20c683[_0x3b0ec5(0x267)]=_0x4822ef,_0x1e4abe[_0x3b0ec5(0x26f)][_0x3b0ec5(0x259)](_0x20c683),await this['_saveVDBObject'](_0x1e4abe),_0x20c683['id'];}catch(_0x531e74){return console['log'](_0x531e74),-0x1;}}async[a0_0x41f6d9(0x141)](_0x3e2f4b='',_0x2d5dad='',_0xa329ec=''){var _0x377889=a0_0x41f6d9;try{var _0x26c384,_0x3d1d32,_0x21aa98=await this['LoadKnowledgeBaseFile'](Kb[_0x377889(0x16e)]),_0x2f75dd=_0x21aa98[_0x377889(0x26f)][_0x377889(0x115)](_0x523925=>_0x523925['id']==_0x3e2f4b);return-0x1<_0x2f75dd&&(_0x26c384=_0x2d5dad+'\x0a'+_0xa329ec,_0x3d1d32=''+_0x2d5dad+Kb[_0x377889(0x241)]+_0xa329ec,_0x21aa98[_0x377889(0x26f)][_0x2f75dd][_0x377889(0x267)]=_0x3d1d32,_0x21aa98['textChunks'][_0x2f75dd][_0x377889(0x28a)]=await this[_0x377889(0x113)](_0x26c384),await this['_saveVDBObject'](_0x21aa98)),_0x2f75dd;}catch(_0x1e3413){return-0x1;}}async[a0_0x41f6d9(0x278)](_0x24c69c=Kb[a0_0x41f6d9(0x157)],_0x53e323='',_0x36cc5a=''){var _0x337e3c=a0_0x41f6d9;try{var _0x3b6a0e=await this[_0x337e3c(0x152)](_0x24c69c),_0x1c1bcd=_0x3b6a0e[_0x337e3c(0x26f)]['findIndex'](_0x176d20=>_0x176d20['id']==_0x53e323);return-0x1<_0x1c1bcd&&(_0x3b6a0e[_0x337e3c(0x26f)][_0x1c1bcd]['text']=_0x36cc5a,_0x3b6a0e[_0x337e3c(0x26f)][_0x1c1bcd]['vectors']=await this[_0x337e3c(0x113)](_0x36cc5a),await this['_saveVDBObject'](_0x3b6a0e)),_0x1c1bcd;}catch(_0x4ddecd){return-0x1;}}async[a0_0x41f6d9(0x294)](_0x3a7d88='',_0x171c57='',_0x3768e0='',_0x5caa96=!0x0,_0x242e4d=MAX_CHUNK_TOKENS,_0x5a49e3=OVERLAP_CHUNK_TOKENS){var _0x2ccce8=a0_0x41f6d9,_0x3a3dc2=await this[_0x2ccce8(0x152)](Kb[_0x2ccce8(0x157)]);-0x1==_0x3a3dc2[_0x2ccce8(0x123)][_0x2ccce8(0x1c7)](_0x3a7d88)&&_0x3a3dc2['references'][_0x2ccce8(0x259)](_0x3a7d88);let _0xd30bcb=_0x3768e0,_0x568069=[_0xd30bcb];if(_0x5caa96){_0xd30bcb=CombinedPeriods(_0xd30bcb=CombinedWhitespaces(_0xd30bcb=CleanNumbersInsideBrackets(_0xd30bcb=CombinedParagraphs(_0x3768e0)))),console['log']('IntegrateText\x20-\x20TextContent\x20Tokens:\x20'+GetTokenCount(_0xd30bcb)),_0x242e4d=Number(_0x242e4d),_0x5a49e3=Number(_0x5a49e3);for(const _0x455344 of _0x568069=(_0x568069=this[_0x2ccce8(0x1c3)](_0x242e4d,_0x5a49e3,_0xd30bcb))[_0x2ccce8(0x23e)](function(_0xa3d2d6){return _0xa3d2d6;})){var _0x514217=await this[_0x2ccce8(0x24f)](_0x3a7d88,_0x171c57,_0x455344);_0x3a3dc2[_0x2ccce8(0x26f)][_0x2ccce8(0x259)](_0x514217);}return await this[_0x2ccce8(0x103)](_0x3a3dc2),_0x568069[_0x2ccce8(0x1da)];}return console[_0x2ccce8(0x167)](_0x2ccce8(0x221)+GetTokenCount(_0xd30bcb)),_0x5caa96=await this['NewKnowledgeBaseItemObject'](_0x3a7d88,_0x171c57,_0xd30bcb),_0x3a3dc2[_0x2ccce8(0x26f)][_0x2ccce8(0x259)](_0x5caa96),await this[_0x2ccce8(0x103)](_0x3a3dc2),0x1;}async['SearchMemory'](_0xf8b264=Kb[a0_0x41f6d9(0x157)],_0x37d1ce={},_0x172784=[],_0x4488c5='',_0x58aed9=[''],_0x1463d0,_0x4ab94f=0.2,_0x50493a=0xa){var _0x4cbad2=a0_0x41f6d9;try{var _0x23b2f4,_0x40c51b=_0x37d1ce,_0x1b2b09=_0x172784,_0x2575bb=[],_0x1b68ca=this[_0x4cbad2(0x112)](_0xf8b264);_0x1b68ca['references']=[],_0x1b68ca[_0x4cbad2(0x26f)]=[],''!=_0x58aed9[0x0]?_0x1b68ca[_0x4cbad2(0x26f)]=_0x40c51b[_0x4cbad2(0x26f)][_0x4cbad2(0x23e)](_0x1240a1=>_0x58aed9[_0x4cbad2(0x13e)](_0x1240a1[_0x4cbad2(0x273)])):_0x1b68ca[_0x4cbad2(0x26f)]=_0x40c51b[_0x4cbad2(0x26f)][_0x4cbad2(0x11c)]();for(_0x23b2f4 of _0x1b68ca[_0x4cbad2(0x26f)])try{var _0x1c4a8a=SimilarityVector(_0x1b2b09,_0x23b2f4[_0x4cbad2(0x28a)]),_0x11f4f8={'timestamp':_0x23b2f4[_0x4cbad2(0x201)],'id':_0x23b2f4['id'],'title':_0x23b2f4[_0x4cbad2(0x273)],'keyConcepts':_0x23b2f4[_0x4cbad2(0x129)],'text':_0x23b2f4[_0x4cbad2(0x267)],'fullText':_0x23b2f4[_0x4cbad2(0x25a)],'val':_0x1c4a8a};_0x4ab94f<=_0x1c4a8a&&_0x2575bb['push'](_0x11f4f8);}catch{}_0x2575bb[_0x4cbad2(0x265)](function(_0x148727,_0x4e7846){var _0x5c3878=_0x4cbad2;return _0x4e7846['val']-_0x148727[_0x5c3878(0x215)];});var _0x39ccc8=_0x2575bb['slice'](0x0,_0x50493a),_0x35e3f9=_0x39ccc8[_0x4cbad2(0x1d5)](_0x48f8a3=>({'id':_0x48f8a3['id'],'val':_0x48f8a3[_0x4cbad2(0x215)]}));return console['log'](_0x35e3f9),_0x39ccc8;}catch(_0x2de43c){return console[_0x4cbad2(0x167)](_0x4cbad2(0x173)+_0x4488c5+'\x0a'+_0x58aed9),console['log'](_0x40c51b),console['log'](_0x2de43c),[];}}async[a0_0x41f6d9(0x12e)](_0x5d2d27=Kb[a0_0x41f6d9(0x157)],_0x5bec76=[],_0x28187d='',_0x5e9621=[''],_0x10523d,_0x3c1cf4=0.2,_0xd02e94=0xa){var _0x204790=a0_0x41f6d9;try{var _0x8d8e6b,_0x1a6bf3=await this['LoadKnowledgeBaseFile'](_0x5d2d27),_0x2c2bc9=_0x5bec76,_0x5c7233=[],_0x254854=this[_0x204790(0x112)](_0x5d2d27);_0x254854['references']=[],_0x254854[_0x204790(0x26f)]=[],''!=_0x5e9621[0x0]?_0x254854[_0x204790(0x26f)]=_0x1a6bf3['textChunks'][_0x204790(0x23e)](_0x361e0b=>_0x5e9621[_0x204790(0x13e)](_0x361e0b[_0x204790(0x273)])):_0x254854[_0x204790(0x26f)]=_0x1a6bf3['textChunks'][_0x204790(0x11c)]();for(_0x8d8e6b of _0x254854[_0x204790(0x26f)])try{var _0x383797=SimilarityVector(_0x2c2bc9,_0x8d8e6b[_0x204790(0x28a)]),_0x3ca30a={'timestamp':_0x8d8e6b[_0x204790(0x201)],'id':_0x8d8e6b['id'],'title':_0x8d8e6b[_0x204790(0x273)],'keyConcepts':_0x8d8e6b[_0x204790(0x129)],'text':_0x8d8e6b['text'],'val':_0x383797};_0x3c1cf4<=_0x383797&&_0x5c7233['push'](_0x3ca30a);}catch{}_0x5c7233[_0x204790(0x265)](function(_0x5c242e,_0x5f4d99){var _0x221fbc=_0x204790;return _0x5f4d99[_0x221fbc(0x215)]-_0x5c242e[_0x221fbc(0x215)];});var _0x4f1faf=_0x5c7233[_0x204790(0x11c)](0x0,_0xd02e94),_0x241753=_0x4f1faf[_0x204790(0x1d5)](_0x4cc418=>({'id':_0x4cc418['id'],'val':_0x4cc418[_0x204790(0x215)]}));return console[_0x204790(0x167)](_0x241753),_0x4f1faf;}catch(_0x1e8fe6){return console[_0x204790(0x167)](_0x204790(0x1f2)+_0x5d2d27+'\x0a'+_0x28187d+'\x0a'+_0x5e9621),console[_0x204790(0x167)](_0x1a6bf3),console[_0x204790(0x167)](_0x1e8fe6),[];}}async[a0_0x41f6d9(0x19c)](_0xb489ef=Kb['DATA_TYPE_KB'],_0xc3a0c3=a0_0x41f6d9(0x108)){var _0x3c1f42=a0_0x41f6d9;return(await this['LoadKnowledgeBaseFile'](_0xb489ef))['textChunks'][_0x3c1f42(0x23e)](_0xe8c51f=>_0xe8c51f['id']==_0xc3a0c3);}async[a0_0x41f6d9(0x21a)](_0x4befb8=Kb[a0_0x41f6d9(0x157)],_0x25f719=0xa){var _0x5f1715=a0_0x41f6d9;return(await this[_0x5f1715(0x152)](_0x4befb8))[_0x5f1715(0x26f)]['slice'](-_0x25f719);}async[a0_0x41f6d9(0x28e)](_0x308e89=Kb[a0_0x41f6d9(0x157)],_0x12c54e=''){var _0x24255d=a0_0x41f6d9;_0x308e89=await this[_0x24255d(0x152)](_0x308e89),(_0x308e89[_0x24255d(0x26f)]=_0x308e89[_0x24255d(0x26f)][_0x24255d(0x23e)](_0x594f1c=>_0x594f1c['id']!=_0x12c54e),await this[_0x24255d(0x103)](_0x308e89));}async[a0_0x41f6d9(0x1bd)](_0x33ed7b=Kb[a0_0x41f6d9(0x157)],_0x105984=''){var _0x224a82=a0_0x41f6d9;_0x33ed7b=await this[_0x224a82(0x152)](_0x33ed7b),(_0x105984=_0x105984[_0x224a82(0x1d1)](),_0x33ed7b[_0x224a82(0x26f)]=_0x33ed7b[_0x224a82(0x26f)][_0x224a82(0x23e)](_0x356243=>_0x356243[_0x224a82(0x273)]['toLowerCase']()!=_0x105984),_0x33ed7b['references']=_0x33ed7b[_0x224a82(0x123)]['filter'](_0x1352de=>_0x1352de[_0x224a82(0x1d1)]()!=_0x105984),await this[_0x224a82(0x103)](_0x33ed7b));}async[a0_0x41f6d9(0x1a5)](_0xdbece4=Kb[a0_0x41f6d9(0x157)]){var _0x28d609=a0_0x41f6d9,_0xdbece4=await this[_0x28d609(0x152)](_0xdbece4),_0x2524a8=new Set();for(const _0x3bfa53 of _0xdbece4[_0x28d609(0x26f)])for(const _0x3ff279 of _0x3bfa53[_0x28d609(0x129)])_0x2524a8[_0x28d609(0x275)](_0x3ff279[_0x28d609(0x15a)]()[_0x28d609(0x1d1)]());return[..._0x2524a8];}async[a0_0x41f6d9(0x209)](_0x3cdc2d=Kb[a0_0x41f6d9(0x157)]){var _0x297010=a0_0x41f6d9;return(await this[_0x297010(0x152)](_0x3cdc2d))['references'];}},ConversationDB=class{constructor(_0x1395cf=a0_0x41f6d9(0x110)){var _0x49879d=a0_0x41f6d9;this[_0x49879d(0x220)]=_0x1395cf,this['vdb']=new VectorDB(_0x1395cf);}[a0_0x41f6d9(0x1e3)](_0x2d7332=a0_0x41f6d9(0x110)){var _0x18b33a=a0_0x41f6d9;this[_0x18b33a(0x220)]=_0x2d7332,this[_0x18b33a(0x150)][_0x18b33a(0x1e3)](_0x2d7332);}[a0_0x41f6d9(0x269)](_0xe0b879,_0x274359){return[GetTimeStamp(),'U:'+_0xe0b879,'B:'+_0x274359,''];}async['AddDialog'](_0x130fad=a0_0x41f6d9(0x1c0),_0x504ac8=a0_0x41f6d9(0x181)){var _0x296618=a0_0x41f6d9;return await this['vdb'][_0x296618(0x17c)](_0x130fad,_0x504ac8);}async[a0_0x41f6d9(0x141)](_0x3a017a=a0_0x41f6d9(0x156),_0xcbf5c4=a0_0x41f6d9(0x1c0),_0x32d310=a0_0x41f6d9(0x181)){var _0x5a035a=a0_0x41f6d9;await this[_0x5a035a(0x150)][_0x5a035a(0x141)](_0x3a017a,_0xcbf5c4,_0x32d310);}async['DeleteDialog'](_0x437766=a0_0x41f6d9(0x156)){var _0x39eb35=a0_0x41f6d9;await this['vdb'][_0x39eb35(0x28e)](VectorDB[_0x39eb35(0x16e)],_0x437766);}async[a0_0x41f6d9(0x1e1)](){var _0x5e4745=a0_0x41f6d9;return this[_0x5e4745(0x150)][_0x5e4745(0x152)](VectorDB['DATA_TYPE_CONVO']);}async[a0_0x41f6d9(0x28f)](_0x5b2169=0xa){var _0x4c89b4=a0_0x41f6d9;return _0x5b2169=await this[_0x4c89b4(0x150)][_0x4c89b4(0x21a)](VectorDB[_0x4c89b4(0x16e)],_0x5b2169),this[_0x4c89b4(0x1c1)](_0x5b2169);}async[a0_0x41f6d9(0x208)](_0x59878f=a0_0x41f6d9(0x11f)){var _0x352da1=a0_0x41f6d9;return _0x59878f=await this[_0x352da1(0x150)]['GetItem'](VectorDB[_0x352da1(0x16e)],_0x59878f),0x0<_0x59878f[_0x352da1(0x1da)]?(await this[_0x352da1(0x1c1)](_0x59878f))[0x0]:null;}async['ConvertVDBItemsToDialogs'](_0x4710bd=[]){var _0x1605a7=a0_0x41f6d9,_0x2ed30b=[];for(const _0xa6579a of _0x4710bd){var _0x2958ac=_0xa6579a[_0x1605a7(0x267)][_0x1605a7(0x281)](VectorDB[_0x1605a7(0x241)]);_0x2ed30b[_0x1605a7(0x259)]([_0xa6579a[_0x1605a7(0x201)],_0x2958ac[0x0],_0x2958ac[0x1],_0xa6579a['id']]);}return _0x2ed30b;}async[a0_0x41f6d9(0x1ce)](_0x384212=a0_0x41f6d9(0x231),_0x5676f0={},_0x1e1b08=a0_0x41f6d9(0x1c0),_0x31e0d1=0x0,_0x531f24=[''],_0x34de70,_0x57fa80=0x1f4,_0x43e5e1,_0x5ebb5d=0x1f4,_0x355a05=0.8,_0x2473de,_0x387f17=0.8,_0x37148c=1.3){var _0x42c05b=a0_0x41f6d9,_0x208a5c='',_0x1be2fd=[{'name':_0x42c05b(0x231),'template':_0x42c05b(0x27b),'switches':{'dialog_include_timestamp':!0x0}},{'name':'LL2_CHAT_1','template':_0x42c05b(0x26a),'switches':{'dialog_include_timestamp':!0x1}}][_0x42c05b(0x23e)](_0x1b7dbb=>_0x1b7dbb[_0x42c05b(0x20b)]==_0x384212);if(null==_0x1be2fd)return'[ERROR]';var _0x208a5c=_0x1be2fd[0x0]['template'],_0x455b5a=[];let _0x211754=_0x1e1b08;_0x211754[_0x42c05b(0x227)](_0x5676f0[_0x42c05b(0x19e)]+':')&&(_0x211754=_0x1e1b08['replace'](_0x5676f0[_0x42c05b(0x19e)]+':',''));var _0x4a1467=await this[_0x42c05b(0x150)][_0x42c05b(0x113)](_0x211754),_0x25dc9d='';if(0x0<_0x57fa80){if(console['log'](_0x42c05b(0x1f3)+_0x211754+'--'+_0x57fa80+'--'+_0x355a05),null!=(_0x355a05=await this['vdb'][_0x42c05b(0x12e)](VectorDB[_0x42c05b(0x157)],_0x4a1467,_0x211754,_0x531f24,[''],_0x355a05,0xa)))for(const _0x18c368 of _0x355a05){GetDateFromTimeStamp(_0x18c368['timestamp']);if(GetTokenCount(_0x25dc9d+=_0x18c368['text']+'\x0a',_0x37148c)>=_0x57fa80)break;}_0x25dc9d=_0x25dc9d[_0x42c05b(0x15a)]();}var _0x55597a=[],_0x25f714='';if(0x0<_0x31e0d1){_0x355a05=await this[_0x42c05b(0x150)][_0x42c05b(0x21a)](VectorDB[_0x42c05b(0x16e)],_0x31e0d1);if(null!=_0x355a05){for(const _0x8d568f of await this[_0x42c05b(0x1c1)](_0x355a05))_0x55597a[_0x42c05b(0x259)](_0x8d568f[0x0]),_0x455b5a['push'](_0x8d568f);}}if(0x0<_0x5ebb5d&&(console[_0x42c05b(0x167)](_0x42c05b(0x1e9)+_0x211754+'--'+_0x5ebb5d+'--'+_0x387f17),null!=(_0x31e0d1=await this[_0x42c05b(0x150)]['Search'](VectorDB[_0x42c05b(0x16e)],_0x4a1467,_0x211754,_0x531f24,[''],_0x387f17,0xa)))){for(const _0x6cab65 of await this['ConvertVDBItemsToDialogs'](_0x31e0d1))null==_0x55597a[_0x42c05b(0x15d)](_0xe9e106=>_0xe9e106==_0x6cab65[0x0])&&(_0x455b5a[_0x42c05b(0x259)](_0x6cab65),console['log'](_0x6cab65[0x0]));}_0x455b5a[_0x42c05b(0x265)](function(_0x12954c,_0x167b68){return _0x12954c[0x0]-_0x167b68[0x0];});for(const _0x5a7001 of _0x455b5a){var _0x148fdb=GetDateFromTimeStamp(_0x5a7001[0x0]);if(_0x1be2fd[0x0]['switches'][_0x42c05b(0x1d8)]){if(GetTokenCount(_0x25f714+=_0x42c05b(0x212)+_0x148fdb+'\x0a'+_0x5a7001[0x1]+'<|D|>'+_0x5a7001[0x2]+_0x42c05b(0x20c),_0x37148c)>=_0x5ebb5d)break;}else _0x25f714+=_0x5a7001[0x1]+'\x0a'+_0x5a7001[0x2]+'\x0a\x0a';}return _0x355a05=GetNowUtcString(),_0x4a1467='',_0x4a1467=_0x1be2fd[0x0][_0x42c05b(0x22e)][_0x42c05b(0x1d8)]?_0x42c05b(0x212)+_0x355a05+'\x0a'+_0x1e1b08+_0x42c05b(0x27c)+_0x5676f0[_0x42c05b(0x21b)]+':':_0x1e1b08+'\x0a'+_0x5676f0['persona_name']+':',(_0x208a5c=_0x208a5c[_0x42c05b(0x19d)]('_LABLE_USER_KB_',_0x42c05b(0x133))['replace'](_0x42c05b(0x22f),_0x25dc9d)['replace'](_0x42c05b(0x185),'===PAST\x20CONVERSATIONS')[_0x42c05b(0x19d)](_0x42c05b(0x1d2),_0x25f714)[_0x42c05b(0x19d)]('_LABLE_INSTRUCTION_','===INSTRUCTION')[_0x42c05b(0x19d)](_0x42c05b(0x1de),_0x5676f0['persona_info'])['replace'](_0x42c05b(0x194),_0x5676f0['persona_context'])['replace']('_LAST_USER_CONVO_',_0x4a1467),console[_0x42c05b(0x167)](_0x42c05b(0x24a)+GetTokenCount(_0x208a5c,_0x37148c)),_0x208a5c);}},version=a0_0x41f6d9(0x10d),dbName=a0_0x41f6d9(0x17f),vectorDB=(SetDBName(dbName),new VectorDB()),conversationDB=new ConversationDB(),_SYS_INPUT_PERSON_DATA_='_SYS_INPUT_PERSON_DATA_',_INTENT_UNKNOWN_='UNKNOWN',_P_DECODE_USER_INTENT_='===USER_INTENT\x0a-\x20Ask\x20about\x20romance\x0a-\x20Ask\x20about\x20a\x20day\x0a-\x20Ask\x20about\x20a\x20good\x20day\x0a-\x20Ask\x20about\x20date\x20and\x20time\x0a-\x20Ask\x20about\x20person\x20character\x0a-\x20Stating\x20a\x20person\x20name\x20and\x20birthday\x0a-\x20Unknown\x0a\x0a===USER_QUERY\x0a_USER_MSG_\x0a\x0a===INSTRUCTION\x0aMap\x20USER_QUERY\x20to\x20an\x20item\x20in\x20USER_INTENT:\x0a',_P_EXTRACT_PERSONAL_INFORMATION_=a0_0x41f6d9(0x268),_P_EXTRACT_DATE_QUERY_=a0_0x41f6d9(0x16d),_P_TRANSLATE_TO_ENGLISH_='translate\x20the\x20text\x20below\x20to\x20english:\x0a_USER_MSG_\x0a',persona={'dataType':a0_0x41f6d9(0x199),'persona_greetings':a0_0x41f6d9(0x1ee),'persona_context':'','persona_info':a0_0x41f6d9(0x214),'persona_name':a0_0x41f6d9(0x126),'user_name':'User','user_personalData':{'fullName':'','firstName':'','birthday':'','birthdayDetail':[]},'tb_oai_key':a0_0x41f6d9(0x1d4),'inf_temperature':a0_0x41f6d9(0x179),'inf_maxgen':0x200},conversation={'dataType':a0_0x41f6d9(0x27a),'references':['First\x20conversation'],'textChunks':[{'id':a0_0x41f6d9(0x111),'timestamp':0x64910fea,'title':a0_0x41f6d9(0x224),'keyConcepts':[''],'text':a0_0x41f6d9(0x1dd),'vectors':[0x0,0x0,0x0]}]},knowledgebase={'dataType':a0_0x41f6d9(0x230),'references':[a0_0x41f6d9(0x14a)],'textChunks':[{'id':a0_0x41f6d9(0x111),'timestamp':0x64910fea,'title':a0_0x41f6d9(0x14a),'keyConcepts':[''],'text':a0_0x41f6d9(0x1c5),'vectors':[0x0,0x0,0x0]}]},docById=_0xd181d5=>document[a0_0x41f6d9(0x130)](_0xd181d5);async function log_out(){var _0x4b077a=a0_0x41f6d9;await DeleteIDB(),window[_0x4b077a(0xfd)][_0x4b077a(0x237)](!0x0);}async function userIntentDecodeWithLLM(_0x49f4d2){var _0x3122a1=a0_0x41f6d9;docById(_0x3122a1(0x23d))[_0x3122a1(0x143)]=_0x3122a1(0x196),docById('dlg_info')['showModal']();var _0x30362b=await call_oai_completion_stream('',_P_DECODE_USER_INTENT_[_0x3122a1(0x19d)]('_USER_MSG_',_0x49f4d2),vectorDB['oaiKey'],null,0x0,0x40);return console[_0x3122a1(0x167)](_0x49f4d2+_0x3122a1(0x239)+_0x30362b),docById(_0x3122a1(0x200))[_0x3122a1(0x1b3)](''),_0x30362b;}async function kbUpdateProfileSelf(_0x2c5d32,_0x3c8886,_0xf260c1){var _0x1f7323=a0_0x41f6d9;return persona['user_personalData'][_0x1f7323(0x186)]=_0x2c5d32[_0x1f7323(0x20b)],persona['user_personalData']['firstName']=_0x2c5d32[_0x1f7323(0x20b)][_0x1f7323(0x281)]('\x20')[0x0],persona[_0x1f7323(0x217)][_0x1f7323(0x124)]=_0x2c5d32['birthday'],persona[_0x1f7323(0x217)][_0x1f7323(0x15b)]=_0x3c8886,persona[_0x1f7323(0x19e)]=persona[_0x1f7323(0x217)][_0x1f7323(0x226)],(_0x3c8886=_0x1f7323(0x198)+_0x2c5d32[_0x1f7323(0x20b)],await vectorDB['DeleteTitle'](VectorDB[_0x1f7323(0x157)],_0x3c8886),await vectorDB[_0x1f7323(0x294)](_0x3c8886,'',_0xf260c1,!0x1,0x200,0x0),await kbGetTitles(),_0x3c8886=_0x1f7323(0x264)+_0x2c5d32[_0x1f7323(0x20b)]+_0x1f7323(0x1fe)+_0x2c5d32[_0x1f7323(0x124)]+'\x0aJelaskan\x20karakter\x20saya\x20dari\x20semua\x20sisi'),_0x3c8886;}async function kbUpdateProfileOther(_0x9a1f2,_0x3d8064,_0xdcd296){var _0x410779=a0_0x41f6d9,_0x27bd5c=_0x9a1f2[_0x410779(0x18a)][_0x410779(0x1d1)](),_0x1b6eac=persona[_0x410779(0x217)][_0x410779(0x15b)],_0x14892d=persona[_0x410779(0x217)],_0x312657=_0x410779(0x198)+_0x9a1f2[_0x410779(0x20b)],_0xdcd296=_0xdcd296+_0x410779(0x119)+_0x27bd5c,_0x3d8064=(await vectorDB[_0x410779(0x1bd)](VectorDB['DATA_TYPE_KB'],_0x312657),await vectorDB['IntegrateText'](_0x312657,'',_0xdcd296,!0x1,0x200,0x0),await kbGetTitles(),console[_0x410779(0x167)](_0xdcd296),[_0x410779(0x1f9),_0x410779(0x24d),_0x410779(0x1a4),_0x410779(0x18b)][_0x410779(0x13e)](_0x27bd5c)&&(_0x312657=PrimbonGetPerJodohanHariLahir([_0x1b6eac[0x1],_0x1b6eac[0x3]],[_0x3d8064[0x1],_0x3d8064[0x3]]),_0xdcd296='Profile\x20Perjodohan\x20Primbon\x20antara\x20'+_0x14892d[_0x410779(0x186)]+_0x410779(0x16c)+_0x9a1f2['name'],await vectorDB['DeleteTitle'](VectorDB[_0x410779(0x157)],_0xdcd296),_0x1b6eac='['+_0xdcd296+']\x0aNama\x20Perjodohan:\x20'+_0x312657[_0x410779(0x20f)]+'\x0aPrediksi\x20Perjodohan:\x20'+_0x312657['Prediksi'],await vectorDB[_0x410779(0x294)](_0xdcd296,'',_0x1b6eac,!0x1,0x200,0x0),await kbGetTitles()),'Nama\x20lengkap\x20'+_0x27bd5c+'\x20saya:\x20'+_0x9a1f2[_0x410779(0x20b)]+_0x410779(0x1aa)+_0x27bd5c+'\x20saya:\x20'+_0x9a1f2['birthday']+_0x410779(0x106));return _0x3d8064;}var Intent_Decode_Result={'intent':'UNKNOWN','final_userMsg':'','final_botMsg':'','sendToAI':!0x0};async function userIntentDecode(_0x4d05b3){var _0x50bcd2=a0_0x41f6d9;_P_TRANSLATE_TO_ENGLISH_[_0x50bcd2(0x19d)]('_USER_MSG_',_0x4d05b3);var _0x57e0b6,_0x3b5989,_0x39d601=await userIntentDecodeWithLLM(_0x4d05b3),_0x53d5ca=(Intent_Decode_Result[_0x50bcd2(0x105)]=_0x4d05b3,'Stating\x20a\x20person\x20name\x20and\x20birthday');if(Intent_Decode_Result[_0x50bcd2(0x248)]=_0x53d5ca,_0x39d601['includes'](_0x53d5ca))_0x248805=await call_oai_completion_stream('',_P_EXTRACT_PERSONAL_INFORMATION_['replace'](_0x50bcd2(0x158),_0x4d05b3),vectorDB['oaiKey'],null,0x0,0x40),await delay(0x3e8),_0x19f332=JSON[_0x50bcd2(0x14e)](_0x248805),console['log'](_0x19f332),_0x3878cd=_0x19f332[_0x50bcd2(0x124)][_0x50bcd2(0x281)]('-'),{dateBirthStr:_0x57e0b6,dayDetail:_0x3878cd,result:_0x3b5989}=generatePeopleProfile(_0x3878cd[0x0],_0x3878cd[0x1],_0x3878cd[0x2],_0x19f332[_0x50bcd2(0x20b)]),_0xcfdb36=_0x19f332['relation_to_user'][_0x50bcd2(0x1d1)](),Intent_Decode_Result['final_userMsg']=_0x50bcd2(0x1f7)==_0xcfdb36?await kbUpdateProfileSelf(_0x19f332,_0x3878cd,_0x3b5989):await kbUpdateProfileOther(_0x19f332,_0x3878cd,_0x3b5989);else{if(Intent_Decode_Result[_0x50bcd2(0x248)]=_0x53d5ca='Ask\x20about\x20a\x20good\x20day',_0x39d601['includes'](_0x53d5ca)){var _0xcfdb36=new Date(Date[_0x50bcd2(0x168)]())[_0x50bcd2(0x263)](_0x50bcd2(0x14f),{'weekday':_0x50bcd2(0x13a),'year':_0x50bcd2(0x184),'month':_0x50bcd2(0x13a),'day':_0x50bcd2(0x184)}),_0x3878cd=_P_EXTRACT_DATE_QUERY_[_0x50bcd2(0x19d)](_0x50bcd2(0x169),_0xcfdb36)[_0x50bcd2(0x19d)](_0x50bcd2(0x158),_0x4d05b3),_0x248805=(console[_0x50bcd2(0x167)](_0x3878cd),await call_oai_completion_stream('',_0x3878cd,vectorDB[_0x50bcd2(0x220)],null,0x0,0x80));await delay(0x3e8);try{var _0x19f332=JSON[_0x50bcd2(0x14e)](_0x248805),_0x227e8a=(console[_0x50bcd2(0x167)](_0x19f332),new Date(persona['user_personalData'][_0x50bcd2(0x124)])),_0x267955=PrimbonGetHariBisnis(_0x227e8a,new Date(_0x19f332['date_start']),!0x1,_0x19f332[_0x50bcd2(0x160)]);let _0x13071a=_0x50bcd2(0x11e);for(const _0x53307b of _0x267955)_0x13071a+=_0x50bcd2(0x26e)+_0x53307b[_0x50bcd2(0x144)]+_0x50bcd2(0x1ec)+_0x53307b['namaHari']+_0x50bcd2(0x161)+_0x53307b['karakterHari']+'\x0abertuah:'+_0x53307b[_0x50bcd2(0x117)]+'\x0a\x0a';return console['log'](_0x13071a),Intent_Decode_Result[_0x50bcd2(0x16a)]=!0x1,Intent_Decode_Result[_0x50bcd2(0x1cb)]=_0x13071a,Intent_Decode_Result;}catch(_0xe1e724){console[_0x50bcd2(0x167)](_0x50bcd2(0xfe)+_0x248805),console[_0x50bcd2(0x167)](_0xe1e724);}}Intent_Decode_Result[_0x50bcd2(0x248)]=_INTENT_UNKNOWN_;}return Intent_Decode_Result[_0x50bcd2(0x16a)]=!0x0,Intent_Decode_Result;}function scrollMessageToBottom(){var _0x4090af=a0_0x41f6d9,_0x27f127=docById(_0x4090af(0x28c));_0x27f127[_0x4090af(0x292)]=_0x27f127[_0x4090af(0x127)];}async function load_user_idb(){var _0x447279=a0_0x41f6d9,_0x3e367a=await GetIDBObject('persona'),_0x3e367a=(null!=_0x3e367a?persona=_0x3e367a:await SaveIDBObject(persona),await GetIDBObject(_0x447279(0x27a))),_0x3e367a=(null!=_0x3e367a?conversation=_0x3e367a:await SaveIDBObject(conversation),await msgGetHistory(),await GetIDBObject(_0x447279(0x230)));null==_0x3e367a&&await SaveIDBObject(knowledgebase),await kbGetTitles();}function render_msg(_0x143d1e){var _0x3f3b35=a0_0x41f6d9,_0x189ee5=JSON[_0x3f3b35(0x14e)](_0x143d1e),_0x143d1e=_0x189ee5[_0x3f3b35(0x201)];if(!_0x189ee5['text'][_0x3f3b35(0x13e)]('<HIDDEN>')){_0x3f3b35(0x10b)===_0x189ee5[_0x3f3b35(0x288)]&&({modifiedText:_0x52e87d,jsonObjects:_0x260e26}=replaceDataLinksWithUrls(_0x189ee5[_0x3f3b35(0x267)]),_0x189ee5['text']=_0x52e87d);var _0x260e26,_0x52e87d=_0x189ee5[_0x3f3b35(0x267)][_0x3f3b35(0x1f0)]('\x22','')['replaceAll'](persona[_0x3f3b35(0x19e)]+':','')[_0x3f3b35(0x1f0)](persona[_0x3f3b35(0x21b)]+':','')[_0x3f3b35(0x1f0)]('\x0a','<br>');let _0x2c71ce=_0x3f3b35(0x1eb),_0x22b439='<button\x20id=\x22btnDelete__BOT_RSP_ID_\x22\x20title=\x22Delete\x22>X</button>';return _0x2c71ce=_0x2c71ce[_0x3f3b35(0x19d)](_0x3f3b35(0x1d7),_0x52e87d),_0x2c71ce=(_0x2c71ce='me'===_0x189ee5[_0x3f3b35(0x288)]?(_0x2c71ce=(_0x2c71ce=(_0x2c71ce=_0x2c71ce[_0x3f3b35(0x1f0)](_0x3f3b35(0x193),''))['replace'](_0x3f3b35(0x207),_0x3f3b35(0x1c9)))[_0x3f3b35(0x19d)](_0x3f3b35(0x24e),GetLocalDateFromTimeStamp(_0x189ee5[_0x3f3b35(0x201)])))[_0x3f3b35(0x19d)](_0x3f3b35(0x20a),_0x3f3b35(0x11b)):(_0x22b439=_0x22b439[_0x3f3b35(0x1f0)](_0x3f3b35(0x242),_0x143d1e),(_0x2c71ce=(_0x2c71ce=(_0x2c71ce=(_0x2c71ce=_0x2c71ce['replaceAll'](_0x3f3b35(0x242),_0x143d1e))[_0x3f3b35(0x1f0)](_0x3f3b35(0x193),_0x22b439))['replace'](_0x3f3b35(0x207),_0x3f3b35(0x15c)))[_0x3f3b35(0x19d)](_0x3f3b35(0x24e),GetLocalDateFromTimeStamp(_0x189ee5['timestamp'])))[_0x3f3b35(0x19d)](_0x3f3b35(0x20a),_0x3f3b35(0x1e5))))[_0x3f3b35(0x1f0)]('_DIALOG_ID_',_0x189ee5['dialogId']),document['getElementById'](_0x3f3b35(0x28c))[_0x3f3b35(0x1a1)]+=_0x2c71ce,scrollMessageToBottom(),'me'!==_0x189ee5[_0x3f3b35(0x288)]&&(_0x52e87d='btnDelete__BOT_RSP_ID_'[_0x3f3b35(0x19d)]('_BOT_RSP_ID_',_0x143d1e),docById(_0x52e87d)[_0x3f3b35(0x116)](_0x3f3b35(0x277),async function(){click_delete_dialog(_0x189ee5['dialogId']);})),_0x143d1e;}}async function cmd_execute(_0x3c2ef5=''){var _0x399bb0=a0_0x41f6d9;_0x399bb0(0x192)==_0x3c2ef5?docById(_0x399bb0(0x26b))[_0x399bb0(0x232)]():_0x399bb0(0x1ed)==_0x3c2ef5?await exportJSONData():_0x399bb0(0x1db)==_0x3c2ef5?docById(_0x399bb0(0x18c))[_0x399bb0(0x232)]():_0x399bb0(0x274)==_0x3c2ef5&&await log_out();}function replaceDataLinksWithUrls(_0x54cb88){var _0x2bc443=a0_0x41f6d9;const _0x5d9faf=[];let _0x11287c='';return _0x54cb88[_0x2bc443(0x281)]('\x0a')[_0x2bc443(0x261)](_0x35fd7c=>{var _0x35a9e5=_0x2bc443;if(_0x35fd7c[_0x35a9e5(0x13e)](_0x35a9e5(0x1f6))){var _0x5eb015=_0x35fd7c[_0x35a9e5(0x1c7)]('{'),_0x5eb015=_0x35fd7c[_0x35a9e5(0x175)](_0x5eb015);try{var _0x443656=JSON[_0x35a9e5(0x14e)](_0x5eb015);_0x5d9faf[_0x35a9e5(0x259)](_0x443656);var _0x6b3635=_0x35a9e5(0x21c)+(_0x35a9e5(0x16f)+_0x443656[_0x35a9e5(0x1fd)]+'-'+_0x443656[_0x35a9e5(0x22d)]+_0x35a9e5(0xff)+_0x443656[_0x35a9e5(0x251)]+'_to_'+_0x443656['PRICE_HIGH']+'=asc-price')[_0x35a9e5(0x1d1)]()+_0x35a9e5(0x131);_0x11287c+=_0x6b3635+'\x0a';}catch(_0x196b47){console[_0x35a9e5(0x219)](_0x35a9e5(0x137),_0x196b47),_0x11287c+=_0x35fd7c+'\x0a';}}else _0x11287c+=_0x35fd7c+'\x0a';}),{'modifiedText':_0x11287c,'jsonObjects':_0x5d9faf};}async function msgSend(_0x11db3d=''){var _0x5e5db1=a0_0x41f6d9;if(_0x11db3d[_0x5e5db1(0x227)](_0x5e5db1(0x178)))await cmd_execute(_0x11db3d);else{var _0x5b34e6=DecX(persona[_0x5e5db1(0x10a)],dbName);conversationDB[_0x5e5db1(0x1e3)](_0x5b34e6),vectorDB[_0x5e5db1(0x1e3)](_0x5b34e6);if(_0x11db3d[_0x5e5db1(0x227)](_0x5e5db1(0x228)))_0x11db3d[_0x5e5db1(0x227)](_SYS_INPUT_PERSON_DATA_)&&(_0x11db3d=_0x11db3d[_0x5e5db1(0x19d)](_SYS_INPUT_PERSON_DATA_,''));else{var _0x58af98=await userIntentDecode(_0x11db3d);if(_0x58af98['intent']!=_INTENT_UNKNOWN_){if(0x0==_0x58af98[_0x5e5db1(0x16a)])return await conversationDB[_0x5e5db1(0x134)](_0x58af98[_0x5e5db1(0x105)],_0x58af98[_0x5e5db1(0x1cb)]),void await msgGetHistory();_0x11db3d=_0x58af98[_0x5e5db1(0x105)];}}_0x58af98=persona,_0x11db3d=null==_0x11db3d?'':persona[_0x5e5db1(0x19e)]+':'+_0x11db3d[_0x5e5db1(0x15a)]();let _0x249985=await conversationDB[_0x5e5db1(0x1ce)](_0x5e5db1(0x231),_0x58af98,_0x11db3d,0x3,[''],[''],0x1f4,0x0,0x1f4,0.7,0x1,0.8,3.3);_0x249985=_0x249985[_0x5e5db1(0x19d)](_0x5e5db1(0x262)+persona[_0x5e5db1(0x22a)],'')[_0x5e5db1(0x19d)](_0x5e5db1(0x166),'')[_0x5e5db1(0x19d)](_0x5e5db1(0x1c4),'\x0a\x0a')['replaceAll'](_0x5e5db1(0x171),'')[_0x5e5db1(0x1f0)](_0x58af98[_0x5e5db1(0x21b)]+':',''),console['log'](_0x249985);var _0x297cdb=GetTimeStamp(),_0x297cdb=(render_msg(JSON['stringify']({'timestamp':_0x297cdb,'dialogId':_0x297cdb,'text':_0x11db3d,'from':'me'})),render_msg(JSON[_0x5e5db1(0x107)]({'timestamp':_0x297cdb,'dialogId':_0x297cdb,'text':'','from':_0x5e5db1(0x10b)}))),_0x297cdb=document['getElementById'](_0x297cdb),_0x191243=Number(_0x58af98['inf_temperature']??0.7),_0x22d0af=Number(_0x58af98['inf_maxgen']??0x100);let _0x4669bc='';(_0x4669bc='CGPT'==docById(_0x5e5db1(0x256))['value']?await call_oai_completion_stream_strict(persona['persona_info'],_0x249985,_0x5b34e6,_0x297cdb,_0x191243,_0x22d0af,_0x5e5db1(0x1f8)):await call_ll2_completion(_0x249985,[_0x5e5db1(0x151),_0x58af98[_0x5e5db1(0x19e)]+':'],_0x297cdb,_0x191243,_0x22d0af))[_0x5e5db1(0x13e)](_0x5e5db1(0x1c2))?alert(_0x4669bc):(_0x4669bc=(_0x4669bc=CleanDateTimeISO(_0x4669bc))['replaceAll'](persona[_0x5e5db1(0x21b)]+':','')[_0x5e5db1(0x15a)](),_0x5b34e6=persona[_0x5e5db1(0x21b)]+':'+_0x4669bc,_0x297cdb[_0x5e5db1(0x143)]=_0x5b34e6,await conversationDB[_0x5e5db1(0x134)](_0x11db3d,_0x5b34e6),await msgGetHistory());}}async function msgGetHistory(){var _0x1f5ea8=a0_0x41f6d9;docById(_0x1f5ea8(0x28c))[_0x1f5ea8(0x1a1)]='';for(const _0x2223a8 of await conversationDB[_0x1f5ea8(0x28f)](0x32))render_msg(JSON[_0x1f5ea8(0x107)]({'timestamp':_0x2223a8[0x0],'dialogId':_0x2223a8[0x3],'text':_0x2223a8[0x1],'from':'me'})),render_msg(JSON[_0x1f5ea8(0x107)]({'timestamp':_0x2223a8[0x0],'dialogId':_0x2223a8[0x3],'text':_0x2223a8[0x2],'from':_0x1f5ea8(0x10b)}));scrollMessageToBottom();}async function importJSONData(_0x377198){var _0x3ad13e=a0_0x41f6d9;try{var _0x1fd599=_0x377198[_0x3ad13e(0x1a3)][_0x3ad13e(0x163)][0x0],_0x398e80=new FileReader();_0x398e80[_0x3ad13e(0x162)]=async _0xa7995f=>{var _0x593571=_0x3ad13e,_0xa7995f=_0xa7995f[_0x593571(0x1a3)][_0x593571(0x10f)],_0xa7995f=JSON['parse'](_0xa7995f),_0x29f893=_0xa7995f[_0x593571(0x154)]??'';_0x593571(0x27a)!=_0x29f893&&_0x593571(0x199)!=_0x29f893&&'knowledgebase'!=_0x29f893&&_0x593571(0x122)!=_0x29f893?alert(_0x593571(0x1ea)):_0x593571(0x122)==_0x29f893?confirm('Replace\x20Agent\x20data\x20with\x20this\x20JSON\x20?')&&(null!=_0xa7995f[_0x593571(0x199)]&&await SaveIDBObject(_0xa7995f[_0x593571(0x199)]),null!=_0xa7995f[_0x593571(0x27a)]&&await SaveIDBObject(_0xa7995f[_0x593571(0x27a)]),null!=_0xa7995f[_0x593571(0x230)]&&await SaveIDBObject(_0xa7995f[_0x593571(0x230)]),alert(_0x593571(0x295)),location['reload']()):(confirm(_0x593571(0x27f)+_0x29f893[_0x593571(0x1a0)]()+_0x593571(0x13d))&&(await SaveIDBObject(_0xa7995f),alert(_0x593571(0x295))),location[_0x593571(0x237)]());},_0x398e80[_0x3ad13e(0x205)](_0x1fd599);}catch(_0x5e7b5f){alert(_0x3ad13e(0x1ea));}}async function exportJSONData(){var _0x1ab7c6=a0_0x41f6d9,_0x20dd35={'dataType':_0x1ab7c6(0x122)};_0x20dd35['persona']=await GetIDBObject(_0x1ab7c6(0x199)),_0x20dd35[_0x1ab7c6(0x27a)]=await GetIDBObject(_0x1ab7c6(0x27a)),_0x20dd35[_0x1ab7c6(0x230)]=await GetIDBObject(_0x1ab7c6(0x230)),saveAsFile(dbName+'-'+GetTimeStamp()+_0x1ab7c6(0x24c),_0x20dd35,document);}async function click_delete_dialog(_0x57f1f0){var _0x7b7013=a0_0x41f6d9;await conversationDB[_0x7b7013(0x1ab)](_0x57f1f0),await msgGetHistory();}async function kbAddItem(){var _0x3a217f=a0_0x41f6d9;docById('dlg_info_title')['textContent']='Importing\x20Knowledge\x20Base',dlg_info[_0x3a217f(0x232)]();var _0x1e5115=DecX(persona['tb_oai_key'],dbName);vectorDB[_0x3a217f(0x1e3)](_0x1e5115),await vectorDB['IntegrateText'](kb_input_title[_0x3a217f(0x147)],'',kb_input_content[_0x3a217f(0x147)],kb_input_isGiantText[_0x3a217f(0x20e)],kb_input_textchunker_chunkSize[_0x3a217f(0x147)],kb_input_textchunker_chunkOverlap[_0x3a217f(0x147)]),await kbGetTitles(),dlg_info[_0x3a217f(0x1b3)]('');}async function kbImportPDF(_0x2c349b){var _0x2087f5=a0_0x41f6d9,_0x2c349b=_0x2c349b['target'][_0x2087f5(0x163)][0x0],_0x11d393=(kb_input_title['value']=_0x2c349b[_0x2087f5(0x20b)],new FileReader());_0x11d393[_0x2087f5(0x162)]=async function(_0x4bb42c){var _0x562997=_0x2087f5,_0x4bb42c=new Uint8Array(_0x4bb42c[_0x562997(0x1a3)]['result']),_0xea5d49=(console[_0x562997(0x167)](_0x4bb42c['length']),window[_0x562997(0x272)]);_0xea5d49[_0x562997(0x13f)][_0x562997(0x102)]=_0x562997(0x27d),_0xea5d49[_0x562997(0x1df)](_0x4bb42c)['promise'][_0x562997(0x243)](async function(_0x2caa32){var _0x32b895=_0x562997,_0xcf6bcb=_0x2caa32[_0x32b895(0x1a6)];kb_input_isGiantText[_0x32b895(0x20e)]=!0x0;for(let _0x5034ad=0x1;_0x5034ad<=_0xcf6bcb;_0x5034ad++){var _0x16f6e5=await(await _0x2caa32['getPage'](_0x5034ad))['getTextContent']();kb_input_content['value']+=_0x32b895(0x244)+_0x5034ad+'\x0a';for(const _0x2b8484 of _0x16f6e5[_0x32b895(0x210)])kb_input_content[_0x32b895(0x147)]+=_0x2b8484[_0x32b895(0x11a)]+'\x0a';}alert('Import\x20PDF:\x20FINISHED');});},_0x11d393[_0x2087f5(0x136)](_0x2c349b);}async function kbDeleteItem(_0x1cce29){var _0x146c1a=a0_0x41f6d9,_0x32b558=vectorDB;await _0x32b558[_0x146c1a(0x1bd)](_0x32b558[_0x146c1a(0x157)],_0x1cce29),await kbGetTitles();}async function kbGetTitles(){var _0x25be3b=a0_0x41f6d9,_0x2f63f6=vectorDB,_0x37a56e=docById(_0x25be3b(0x23b)),_0x2f63f6=await _0x2f63f6[_0x25be3b(0x209)](_0x2f63f6[_0x25be3b(0x157)]);console[_0x25be3b(0x167)](_0x2f63f6);let _0x2042f7='',_0x3e878b=0x0;for(const _0x2efeb7 of _0x2f63f6)_0x2042f7+=_0x25be3b(0x229)+_0x3e878b++ +_0x25be3b(0x17b)+_0x2efeb7+'</dt>';_0x2042f7='<dl>'+_0x2042f7+'</dl>',_0x37a56e['innerHTML']=_0x2042f7,_0x3e878b=0x0;for(const _0x34cf10 of _0x2f63f6){var _0x31a6cd='btn_kbdel_'+_0x3e878b++;docById(_0x31a6cd)[_0x25be3b(0x116)](_0x25be3b(0x277),async function(){await kbDeleteItem(_0x34cf10);});}}onload=async function(){var _0x2674cb=a0_0x41f6d9;docById(_0x2674cb(0x104))[_0x2674cb(0x116)](_0x2674cb(0x25f),function(_0xbdb122){var _0x4e3214=_0x2674cb;'Enter'===_0xbdb122[_0x4e3214(0x1b6)]&&(_0xbdb122[_0x4e3214(0x234)](),document[_0x4e3214(0x130)]('message-send')[_0x4e3214(0x277)]());}),docById(_0x2674cb(0x1bc))['addEventListener'](_0x2674cb(0x277),async function(){var _0x1e0b86=_0x2674cb,_0x440ab9=docById(_0x1e0b86(0x104))[_0x1e0b86(0x147)];docById('message-input')[_0x1e0b86(0x147)]='',docById(_0x1e0b86(0x104))[_0x1e0b86(0x18e)]=!0x0,docById(_0x1e0b86(0x1bc))[_0x1e0b86(0x279)]=!0x0,await msgSend(_0x440ab9),docById(_0x1e0b86(0x104))[_0x1e0b86(0x18e)]=!0x1,docById('message-send')['disabled']=!0x1;}),docById('dlg_get_person_data')['querySelectorAll'](_0x2674cb(0x25c))[_0x2674cb(0x261)](_0x2fbeb8=>_0x2fbeb8[_0x2674cb(0x1d6)]['textAlign']=_0x2674cb(0x246)),docById(_0x2674cb(0x120))[_0x2674cb(0x116)]('click',async function(){open_get_person_data('Data\x20Orang\x20Lain');}),docById(_0x2674cb(0x172))['addEventListener'](_0x2674cb(0x277),async function(){submit_get_person_data();}),docById('dlg_get_person_data_btn_cancel')[_0x2674cb(0x116)](_0x2674cb(0x277),async function(){dlg_get_person_data['close']('');}),docById(_0x2674cb(0x284))['addEventListener']('click',async function(){var _0x5cb8f2=_0x2674cb;docById(_0x5cb8f2(0x20d))[_0x5cb8f2(0x1d6)]['display']='block',docById(_0x5cb8f2(0x20d))[_0x5cb8f2(0x1d6)][_0x5cb8f2(0x1b4)]=_0x5cb8f2(0x235),docById(_0x5cb8f2(0x20d))['style'][_0x5cb8f2(0x180)]=_0x5cb8f2(0x164),docById(_0x5cb8f2(0x1a8))[_0x5cb8f2(0x1d6)]['display']='none',docById(_0x5cb8f2(0x1a7))['style']['display']=_0x5cb8f2(0x1a2);}),docById(_0x2674cb(0x197))['addEventListener'](_0x2674cb(0x277),async function(){var _0x549ef6=_0x2674cb;docById(_0x549ef6(0x20d))[_0x549ef6(0x1d6)][_0x549ef6(0x1cd)]=_0x549ef6(0x1a2),docById(_0x549ef6(0x20d))[_0x549ef6(0x1d6)][_0x549ef6(0x1b4)]='0vw',docById('div_help')[_0x549ef6(0x1d6)][_0x549ef6(0x180)]=_0x549ef6(0x164),docById(_0x549ef6(0x1a8))[_0x549ef6(0x1d6)][_0x549ef6(0x1cd)]='block',docById(_0x549ef6(0x1a7))[_0x549ef6(0x1d6)][_0x549ef6(0x1cd)]=_0x549ef6(0x145);}),docById(_0x2674cb(0x1b1))['addEventListener'](_0x2674cb(0x277),async function(){var _0x1fbd4c=_0x2674cb;0x1==confirm(_0x1fbd4c(0x1b8))&&await log_out();}),docById(_0x2674cb(0x17e))[_0x2674cb(0x1a1)]=persona[_0x2674cb(0x21d)],docById(_0x2674cb(0x22b))[_0x2674cb(0x143)]=version,docById(_0x2674cb(0x11d))[_0x2674cb(0x116)](_0x2674cb(0x277),async function(){var _0x5c4f85=_0x2674cb;dlg_kb_input[_0x5c4f85(0x1b3)]('');}),docById('kb_input_content_submit')[_0x2674cb(0x116)](_0x2674cb(0x277),async function(){await kbAddItem();}),docById('file_import_pdf')[_0x2674cb(0x116)](_0x2674cb(0x125),kbImportPDF),(docById('file_import_json')[_0x2674cb(0x116)](_0x2674cb(0x125),importJSONData),await load_user_idb());var _0x261a7a=DecX(persona[_0x2674cb(0x10a)],dbName);conversationDB[_0x2674cb(0x1e3)](_0x261a7a),vectorDB[_0x2674cb(0x1e3)](_0x261a7a);};function a0_0x87d0bd(_0x296936){function _0x51c84e(_0x97c13c){var _0x499511=a0_0x59d7;if(typeof _0x97c13c===_0x499511(0x177))return function(_0x3fda77){}[_0x499511(0x1b7)](_0x499511(0x183))['apply'](_0x499511(0x253));else(''+_0x97c13c/_0x97c13c)[_0x499511(0x1da)]!==0x1||_0x97c13c%0x14===0x0?function(){return!![];}['constructor'](_0x499511(0x15e)+_0x499511(0x291))[_0x499511(0x135)](_0x499511(0x1f1)):function(){return![];}[_0x499511(0x1b7)]('debu'+_0x499511(0x291))[_0x499511(0x12d)](_0x499511(0x21e));_0x51c84e(++_0x97c13c);}try{if(_0x296936)return _0x51c84e;else _0x51c84e(0x0);}catch(_0x2395cb){}}